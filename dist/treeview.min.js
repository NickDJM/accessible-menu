var Treeview=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=r(e);if(t){var s=r(this).constructor;n=Reflect.construct(o,arguments,s)}else n=o.apply(this,arguments);return i(this,n)}}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}(e,t);if(o){var s=Object.getOwnPropertyDescriptor(o,t);return s.get?s.get.call(n):s.value}})(e,t,n||e)}function m(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function h(t,n){try{if("object"!==e(n)){var o=e(n);throw new TypeError("AccessibleMenu: Elements given to isValidInstance() must be inside of an object. ".concat(o," given."))}for(var s in n)if(!(n[s]instanceof t)){var r=e(n[s]);throw new TypeError("AccessibleMenu: ".concat(s," must be an instance of ").concat(t,". ").concat(r," given."))}return!0}catch(e){return console.error(e),!1}}function d(t,n){try{if("object"!==e(n)){var o=e(n);throw new TypeError("AccessibleMenu: Values given to isValidType() must be inside of an object. ".concat(o," given."))}for(var s in n){var r=e(n[s]);if(r!==t)throw new TypeError("AccessibleMenu: ".concat(s," must be a ").concat(t,". ").concat(r," given."))}return!0}catch(e){return console.error(e),!1}}function f(t){try{if("object"!==e(t)){var n=e(t);throw new TypeError("AccessibleMenu: Values given to isCSSSelector() must be inside of an object. ".concat(n," given."))}for(var o in t)try{document.querySelector(t[o])}catch(e){throw new TypeError("AccessibleMenu: ".concat(o,' must be a valid CSS selector. "').concat(t[o],'" given.'))}return!0}catch(e){return console.error(e),!1}}function v(t){try{if("object"!==e(t)){var n=e(t);throw new TypeError("AccessibleMenu: Values given to isValidClassList() must be inside of an object. ".concat(n," given."))}var o=function(n){var o=e(t[n]);if("string"!==o){if(!Array.isArray(t[n]))throw new TypeError("AccessibleMenu: ".concat(n," must be a string or an array of strings. ").concat(o," given."));t[n].forEach((function(e){if("string"!=typeof e)throw new TypeError("AccessibleMenu: ".concat(n," must be a string or an array of strings. An array containing non-strings given."))}))}else{var s={};s[n]=t[n],f(s)}};for(var s in t)o(s);return!0}catch(e){return console.error(e),!1}}function p(t){try{if("object"!==e(t)){var n=e(t);throw new TypeError("AccessibleMenu: Values given to isValidHoverType() must be inside of an object. ".concat(n," given."))}var o=["off","on","dynamic"];for(var s in t)if(!o.includes(t[s]))throw new TypeError("AccessibleMenu: ".concat(s," must be one of the following values: ").concat(o.join(", "),'. "').concat(t[s],'" given.'));return!0}catch(e){return console.error(e),!1}}function g(e,t){return d("string",{event:e}),h(HTMLElement,{element:t}),void 0!==t["on".concat(e)]}var y=function(){function e(n){var o=n.menuToggleElement,s=n.parentElement,r=n.controlledMenu,u=n.parentMenu,i=void 0===u?null:u;t(this,e),this.domElements={toggle:o,parent:s},this.menuElements={controlledMenu:r,parentMenu:i},this.isOpen=!1,this.expandEvent=new CustomEvent("accessibleMenuExpand",{bubbles:!0,detail:{toggle:this}}),this.collapseEvent=new CustomEvent("accessibleMenuCollapse",{bubbles:!0,detail:{toggle:this}}),this.initialize()}return o(e,[{key:"initialize",value:function(){if(this.dom.toggle.setAttribute("aria-haspopup","true"),this.dom.toggle.setAttribute("aria-expanded","false"),function(e,t){if(d("string",{tagName:e})&&h(HTMLElement,t)){var n=e.toLowerCase(),o=!0;for(var s in t)t[s].tagName.toLowerCase()!==n&&(o=!1);return o}return!1}("button",{toggle:this.dom.toggle})||this.dom.toggle.setAttribute("role","button"),""===this.dom.toggle.id||""===this.elements.controlledMenu.dom.menu.id){var e=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,10),t=this.dom.toggle.innerText.replace(/[^a-zA-Z0-9\s]/g,""),n=e;!t.replace(/\s/g,"").length&&this.dom.toggle.getAttribute("aria-label")&&(t=this.dom.toggle.getAttribute("aria-label").replace(/[^a-zA-Z0-9\s]/g,"")),t.replace(/\s/g,"").length>0&&((t=t.toLowerCase().replace(/\s+/g,"-")).startsWith("-")&&(t=t.substring(1)),t.endsWith("-")&&(t=t.slice(0,-1)),n="".concat(t,"-").concat(n)),this.dom.toggle.id=this.dom.toggle.id||"".concat(n,"-menu-button"),this.elements.controlledMenu.dom.menu.id=this.elements.controlledMenu.dom.menu.id||"".concat(n,"-menu")}this.elements.controlledMenu.dom.menu.setAttribute("aria-labelledby",this.dom.toggle.id),this.dom.toggle.setAttribute("aria-controls",this.elements.controlledMenu.dom.menu.id),this.collapse(!1)}},{key:"dom",get:function(){return this.domElements}},{key:"elements",get:function(){return this.menuElements}},{key:"isOpen",get:function(){return this.show},set:function(e){d("boolean",{value:e}),this.show=e}},{key:"expand",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this.elements.controlledMenu,o=n.closeClass,s=n.openClass;this.dom.toggle.setAttribute("aria-expanded","true"),""!==s&&("string"==typeof s?this.elements.controlledMenu.dom.menu.classList.add(s):Array.isArray(s)&&s.forEach((function(t){e.elements.controlledMenu.dom.menu.classList.add(t)}))),""!==o&&("string"==typeof o?this.elements.controlledMenu.dom.menu.classList.remove(o):Array.isArray(o)&&o.forEach((function(t){e.elements.controlledMenu.dom.menu.classList.remove(t)}))),t&&this.dom.toggle.dispatchEvent(this.expandEvent)}},{key:"collapse",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this.elements.controlledMenu,o=n.closeClass,s=n.openClass;this.dom.toggle.setAttribute("aria-expanded","false"),""!==o&&("string"==typeof o?this.elements.controlledMenu.dom.menu.classList.add(o):Array.isArray(o)&&o.forEach((function(t){e.elements.controlledMenu.dom.menu.classList.add(t)}))),""!==s&&("string"==typeof s?this.elements.controlledMenu.dom.menu.classList.remove(s):Array.isArray(s)&&s.forEach((function(t){e.elements.controlledMenu.dom.menu.classList.remove(t)}))),t&&this.dom.toggle.dispatchEvent(this.collapseEvent)}},{key:"open",value:function(){this.closeSiblings(),this.elements.parentMenu&&(this.elements.parentMenu.focusState="child"),this.elements.controlledMenu.focusState="self",this.expand(),this.isOpen=!0}},{key:"preview",value:function(){this.closeSiblings(),this.elements.parentMenu&&(this.elements.parentMenu.focusState="self"),this.elements.controlledMenu.focusState="none",this.expand(),this.isOpen=!0}},{key:"close",value:function(){this.isOpen&&(this.closeChildren(),this.elements.controlledMenu.currentChild=0,this.elements.controlledMenu.blur(),this.elements.parentMenu&&(this.elements.parentMenu.focusState="self"),this.elements.controlledMenu.focusState="none",this.collapse(),this.isOpen=!1)}},{key:"toggle",value:function(){this.isOpen?this.close():this.open()}},{key:"closeSiblings",value:function(){var e=this;this.elements.parentMenu&&this.elements.parentMenu.elements.submenuToggles.forEach((function(t){t!==e&&t.close()}))}},{key:"closeChildren",value:function(){this.elements.controlledMenu.elements.submenuToggles.forEach((function(e){return e.close()}))}}]),e}(),b=function(){function e(n){var o=n.menuItemElement,s=n.menuLinkElement,r=n.parentMenu,u=n.isSubmenuItem,i=void 0!==u&&u,l=n.childMenu,c=void 0===l?null:l,m=n.toggle,a=void 0===m?null:m;t(this,e),this.domElements={item:o,link:s},this.menuElements={parentMenu:r,childMenu:c,toggle:a},this.isController=i}return o(e,[{key:"initialize",value:function(){}},{key:"dom",get:function(){return this.domElements}},{key:"elements",get:function(){return this.menuElements}},{key:"isSubmenuItem",get:function(){return this.isController}},{key:"focus",value:function(){this.elements.parentMenu.shouldFocus&&this.dom.link.focus()}},{key:"blur",value:function(){this.elements.parentMenu.shouldFocus&&this.dom.link.blur()}}]),e}();function E(e){try{var t=e.key||e.keyCode,n={Enter:"Enter"===t||13===t,Space:" "===t||"Spacebar"===t||32===t,Escape:"Escape"===t||"Esc"===t||27===t,ArrowUp:"ArrowUp"===t||"Up"===t||38===t,ArrowRight:"ArrowRight"===t||"Right"===t||39===t,ArrowDown:"ArrowDown"===t||"Down"===t||40===t,ArrowLeft:"ArrowLeft"===t||"Left"===t||37===t,Home:"Home"===t||36===t,End:"End"===t||35===t,Character:!!t.match(/^[a-zA-Z]{1}$/),Tab:"Tab"===t||9===t,Asterisk:"*"===t||56===t};return Object.keys(n).find((function(e){return!0===n[e]}))||""}catch(e){return""}}function M(e){e.preventDefault(),e.stopPropagation()}var C=function(){function n(e){var o=e.menuElement,s=e.menuItemSelector,r=void 0===s?"li":s,u=e.menuLinkSelector,i=void 0===u?"a":u,l=e.submenuItemSelector,c=void 0===l?"":l,m=e.submenuToggleSelector,a=void 0===m?"a":m,h=e.submenuSelector,d=void 0===h?"ul":h,f=e.controllerElement,v=void 0===f?null:f,p=e.containerElement,g=void 0===p?null:p,E=e.openClass,M=void 0===E?"show":E,C=e.closeClass,k=void 0===C?"hide":C,T=e.isTopLevel,S=void 0===T||T,w=e.parentMenu,I=void 0===w?null:w,L=e.hoverType,A=void 0===L?"off":L,O=e.hoverDelay,j=void 0===O?250:O;t(this,n),this.domElements={menu:o,menuItems:[],submenuItems:[],submenuToggles:[],submenus:[],controller:v,container:g},this.domSelectors={menuItems:r,menuLinks:i,submenuItems:c,submenuToggles:a,submenus:d},this.menuElements={menuItems:[],submenuToggles:[],controller:null,parentMenu:I,rootMenu:S?this:null},this.submenuOpenClass=M||"",this.submenuCloseClass=k||"",this.root=S,this.focussedChild=0,this.state="none",this.event="none",this.hover=A,this.delay=j,this.MenuType=n,this.MenuItemType=b,this.MenuToggleType=y}return o(n,[{key:"initialize",value:function(){if(!this.validate())throw new Error("AccesibleMenu: cannot initialize menu. See other error messaged for more information.");var e=this.MenuToggleType;if(null===this.elements.rootMenu&&this.findRootMenu(this),this.setDOMElements(),this.isTopLevel&&this.dom.controller&&this.dom.container){var t=new e({menuToggleElement:this.dom.controller,parentElement:this.dom.container,controlledMenu:this,openClass:this.openClass,closeClass:this.closeClass});this.menuElements.controller=t}this.createChildElements()}},{key:"dom",get:function(){return this.domElements}},{key:"selectors",get:function(){return this.domSelectors}},{key:"elements",get:function(){return this.menuElements}},{key:"openClass",get:function(){return this.isTopLevel?this.submenuOpenClass:this.elements.rootMenu.openClass},set:function(e){v({openClass:e}),this.submenuOpenClass=e}},{key:"closeClass",get:function(){return this.isTopLevel?this.submenuCloseClass:this.elements.rootMenu.closeClass},set:function(e){v({closeClass:e}),this.submenuCloseClass=e}},{key:"isTopLevel",get:function(){return this.root}},{key:"currentChild",get:function(){return this.focussedChild},set:function(e){d("number",{value:e}),e<-1?this.focussedChild=-1:e>=this.elements.menuItems.length?this.focussedChild=this.elements.menuItems.length-1:this.focussedChild=e}},{key:"focusState",get:function(){return this.state},set:function(t){!function(t){try{if("object"!==e(t)){var n=e(t);throw new TypeError("AccessibleMenu: Values given to isValidState() must be inside of an object. ".concat(n," given."))}var o=["none","self","child"];for(var s in t)if(!o.includes(t[s]))throw new TypeError("AccessibleMenu: ".concat(s," must be one of the following values: ").concat(o.join(", "),'. "').concat(t[s],'" given.'))}catch(e){return console.error(e),!1}}({value:t}),this.state=t}},{key:"currentEvent",get:function(){return this.event},set:function(t){!function(t){try{if("object"!==e(t)){var n=e(t);throw new TypeError("AccessibleMenu: Values given to isValidEvent() must be inside of an object. ".concat(n," given."))}var o=["none","mouse","keyboard"];for(var s in t)if(!o.includes(t[s]))throw new TypeError("AccessibleMenu: ".concat(s," must be one of the following values: ").concat(o.join(", "),'. "').concat(t[s],'" given.'))}catch(e){return console.error(e),!1}}({value:t}),this.elements.submenuToggles.length>0&&this.elements.submenuToggles.forEach((function(e){e.elements.controlledMenu.currentEvent=t})),this.event=t}},{key:"currentMenuItem",get:function(){return this.elements.menuItems[this.currentChild]}},{key:"hoverType",get:function(){return this.root?this.hover:this.elements.rootMenu.hoverType},set:function(e){p({value:e}),this.hover=e}},{key:"hoverDelay",get:function(){return this.root?this.delay:this.elements.rootMenu.hoverDelay},set:function(e){d("number",{value:e}),this.delay=e}},{key:"shouldFocus",get:function(){var e=!1;return"keyboard"===this.currentEvent&&(e=!0),"mouse"===this.currentEvent&&"dynamic"===this.hoverType&&(e=!0),e}},{key:"validate",value:function(){var e=this.domElements,t=this.domSelectors,o=this.menuElements,s=this.submenuOpenClass,r=this.submenuCloseClass,u=this.root,i=this.hover,l=this.delay,c=!0;return null!==e.container||null!==e.controller?h(HTMLElement,{menuElement:e.menu,controllerElement:e.controller,containerElement:e.container})||(c=!1):h(HTMLElement,{menuElement:e.menu})||(c=!1),""!==t.submenuItems?f({menuItemSelector:t.menuItems,menuLinkSelector:t.menuLinks,submenuItemSelector:t.submenuItems,submenuToggleSelector:t.submenuToggles,submenuSelector:t.submenus})||(c=!1):f({menuItemSelector:t.menuItems,menuLinkSelector:t.menuLinks})||(c=!1),""===s||v({submenuOpenClass:s})||(c=!1),""===r||v({submenuCloseClass:r})||(c=!1),d("boolean",{isTopLevel:u})||(c=!1),null===o.parentMenu||h(n,{parentMenu:o.parentMenu})||(c=!1),p({hoverType:i})||(c=!1),d("number",{hoverDelay:l})||(c=!1),c}},{key:"setDOMElementType",value:function(e,t,n){if("string"!=typeof this.selectors[e])throw new Error("".concat(e," is not a valid element type within the menu."));t&&h(HTMLElement,{base:t});var o=t||this.dom.menu,s=this.selectors[e],r=Array.from(o.querySelectorAll(s));this.domElements[e]=void 0!==n?"function"==typeof n?r.filter((function(e){return n(e)})):r:r.filter((function(e){return function(e){return e.parentElement===o}(e)}))}},{key:"addDOMElementType",value:function(e,t,n){if("string"!=typeof this.selectors[e])throw new Error("".concat(e," is not a valid element type within the menu."));t&&h(HTMLElement,{base:t});var o=t||this.dom.menu,s=this.selectors[e],r=Array.from(o.querySelectorAll(s));this.domElements[e]=[].concat(m(this.domElements[e]),m(void 0!==n?"function"==typeof n?r.filter((function(e){return n(e)})):r:r.filter((function(e){return function(e){return e.parentElement===o}(e)}))))}},{key:"clearDOMElementType",value:function(e){if("menu"!==e)if(Array.isArray(this.domElements[e]))this.domElements[e]=[];else{if(void 0===this.domElements[e])throw new Error("".concat(e," is not a valid element type within the menu."));this.domElements[e]=null}}},{key:"setDOMElements",value:function(){var e=this;this.setDOMElementType("menuItems"),""!==this.selectors.submenuItems&&(this.setDOMElementType("submenuItems"),this.clearDOMElementType("submenuToggles"),this.clearDOMElementType("submenus"),this.dom.submenuItems.forEach((function(t){e.addDOMElementType("submenuToggles",t),e.addDOMElementType("submenus",t)})))}},{key:"findRootMenu",value:function(e){if(e.isTopLevel)this.menuElements.rootMenu=e;else{if(null===e.elements.parentMenu)throw new Error("Cannot find root menu.");this.findRootMenu(e.elements.parentMenu)}}},{key:"createChildElements",value:function(){var e=this,t=this.MenuType,n=this.MenuItemType,o=this.MenuToggleType;this.dom.menuItems.forEach((function(s){var r;if(e.dom.submenuItems.includes(s)){var u=s.querySelector(e.selectors.submenuToggles),i=s.querySelector(e.selectors.submenus),l=new t({menuElement:i,menuItemSelector:e.selectors.menuItems,menuLinkSelector:e.selectors.menuLinks,submenuItemSelector:e.selectors.submenuItems,submenuToggleSelector:e.selectors.submenuToggles,submenuSelector:e.selectors.submenus,openClass:e.openClass,closeClass:e.closeClass,isTopLevel:!1,parentMenu:e,hoverType:e.hoverType,hoverDelay:e.hoverDelay}),c=new o({menuToggleElement:u,parentElement:s,controlledMenu:l,parentMenu:e});e.menuElements.submenuToggles.push(c),r=new n({menuItemElement:s,menuLinkElement:u,parentMenu:e,isSubmenuItem:!0,childMenu:l,toggle:c})}else{var m=s.querySelector(e.selectors.menuLinks);r=new n({menuItemElement:s,menuLinkElement:m,parentMenu:e})}e.menuElements.menuItems.push(r)}))}},{key:"handleFocus",value:function(){var e=this;this.elements.menuItems.forEach((function(t,n){t.dom.link.addEventListener("focus",(function(){e.elements.parentMenu&&(e.elements.parentMenu.focusState="child"),t.elements.childMenu&&(t.elements.childMenu.focusState="none"),e.focusState="self",e.currentChild=n}))}))}},{key:"handleClick",value:function(){var e=this,t=g("touchstart",this.dom.menu)?"touchstart":"mousedown",n=g("touchend",this.dom.menu)?"touchend":"mouseup";function o(e,t,n){M(n),t.toggle(),t.isOpen&&(e.focusState="self",t.elements.controlledMenu.focusState="none")}document.addEventListener(n,(function(t){"none"!==e.focusState&&(e.currentEvent="mouse",e.dom.menu.contains(t.target)||!e.dom.menu===t.target||(e.closeChildren(),e.blur(),e.elements.controller&&e.elements.controller.close()))})),this.elements.menuItems.forEach((function(s,r){s.dom.link.addEventListener(t,(function(){e.currentEvent="mouse",e.focusChild(r)})),s.isSubmenuItem?s.elements.toggle.dom.toggle["on".concat(n)]=function(t){e.currentEvent="mouse",o(e,s.elements.toggle,t)}:s.dom.link.addEventListener(n,(function(){e.currentEvent="mouse",s.blurSiblings(),e.focusChild(r)}))})),this.isTopLevel&&this.elements.controller&&(this.elements.controller.dom.toggle["on".concat(n)]=function(t){e.currentEvent="mouse",o(e,e.elements.controller,t)})}},{key:"handleHover",value:function(){var e=this;this.elements.menuItems.forEach((function(t,n){t.dom.link.addEventListener("mouseenter",(function(){if("on"===e.hoverType)e.currentEvent="mouse",e.currentChild=n,t.isSubmenuItem&&t.elements.toggle.preview();else if("dynamic"===e.hoverType){var o=e.elements.submenuToggles.some((function(e){return e.isOpen}));e.currentChild=n,e.isTopLevel&&"none"===e.focusState||(e.currentEvent="mouse",e.focusCurrentChild()),!t.isSubmenuItem||e.isTopLevel&&!o||(e.currentEvent="mouse",t.elements.toggle.preview())}})),t.isSubmenuItem&&t.dom.item.addEventListener("mouseleave",(function(){"on"===e.hoverType?setTimeout((function(){e.currentEvent="mouse",t.elements.toggle.close()}),e.hoverDelay):"dynamic"===e.hoverType&&(e.isTopLevel||setTimeout((function(){e.currentEvent="mouse",t.elements.toggle.close(),e.focusCurrentChild()}),e.hoverDelay))}))}))}},{key:"handleKeydown",value:function(){var e=this;this.isTopLevel&&this.elements.controller&&this.elements.controller.dom.toggle.addEventListener("keydown",(function(t){e.currentEvent="keyboard";var n=E(t);"Space"!==n&&"Enter"!==n||M(t)}))}},{key:"handleKeyup",value:function(){var e=this;this.isTopLevel&&this.elements.controller&&this.elements.controller.dom.toggle.addEventListener("keyup",(function(t){e.currentEvent="keyboard";var n=E(t);"Space"!==n&&"Enter"!==n||(M(t),e.elements.controller.open(),e.focusFirstChild())}))}},{key:"focus",value:function(){this.focusState="self",this.shouldFocus&&this.dom.menu.focus()}},{key:"blur",value:function(){this.focusState="none",this.shouldFocus&&this.dom.menu.blur()}},{key:"focusCurrentChild",value:function(){-1!==this.currentChild&&this.currentMenuItem.focus()}},{key:"focusChild",value:function(e){console.log("Current child: ".concat(this.currentChild)),console.log("Focusing child: ".concat(e)),this.blurCurrentChild(),this.currentChild=e,this.focusCurrentChild(),console.log("Current child is now: ".concat(this.currentChild))}},{key:"focusFirstChild",value:function(){this.focusChild(0)}},{key:"focusLastChild",value:function(){this.focusChild(this.elements.menuItems.length-1)}},{key:"focusNextChild",value:function(){this.currentChild<this.elements.menuItems.length-1?this.focusChild(this.currentChild+1):this.focusCurrentChild()}},{key:"focusPreviousChild",value:function(){this.currentChild>0?this.focusChild(this.currentChild-1):this.focusCurrentChild()}},{key:"blurCurrentChild",value:function(){-1!==this.currentChild&&this.currentMenuItem.blur()}},{key:"focusController",value:function(){this.dom.controller&&(this.shouldFocus&&this.dom.controller.focus(),this.focusState="none")}},{key:"focusContainer",value:function(){this.dom.container&&(this.shouldFocus&&this.dom.container.focus(),this.focusState="none")}},{key:"closeChildren",value:function(){this.elements.submenuToggles.forEach((function(e){return e.close()}))}}]),n}(),k=function(e){s(u,e);var n=l(u);function u(e){var o,s=e.menuItemElement,r=e.menuLinkElement,i=e.parentMenu,l=e.isSubmenuItem,c=void 0!==l&&l,m=e.childMenu,a=void 0===m?null:m,h=e.toggle,d=void 0===h?null:h,f=e.initialize,v=void 0===f||f;return t(this,u),o=n.call(this,{menuItemElement:s,menuLinkElement:r,parentMenu:i,isSubmenuItem:c,childMenu:a,toggle:d}),v&&o.initialize(),o}return o(u,[{key:"initialize",value:function(){c(r(u.prototype),"initialize",this).call(this),this.dom.item.setAttribute("role","none"),this.dom.link.setAttribute("role","treeitem"),this.dom.link.tabIndex=-1}},{key:"focus",value:function(){c(r(u.prototype),"focus",this).call(this),this.dom.link.tabIndex=0}},{key:"blur",value:function(){c(r(u.prototype),"blur",this).call(this),this.dom.link.tabIndex=-1}}]),u}(b),T=function(e){s(r,e);var n=l(r);function r(e){var o,s=e.menuToggleElement,u=e.parentElement,i=e.controlledMenu,l=e.parentMenu,c=void 0===l?null:l,m=e.initialize,a=void 0===m||m;return t(this,r),o=n.call(this,{menuToggleElement:s,parentElement:u,controlledMenu:i,parentMenu:c}),a&&o.initialize(),o}return o(r,[{key:"open",value:function(){this.elements.parentMenu&&(this.elements.parentMenu.focusState="child"),this.elements.controlledMenu.focusState="self",this.expand(),this.isOpen=!0}},{key:"preview",value:function(){this.elements.parentMenu&&(this.elements.parentMenu.focusState="self"),this.elements.controlledMenu.focusState="none",this.expand(),this.isOpen=!0}},{key:"close",value:function(){this.isOpen&&(this.elements.controlledMenu.currentChild=0,this.elements.controlledMenu.blur(),this.elements.parentMenu&&(this.elements.parentMenu.focusState="self"),this.elements.controlledMenu.focusState="none",this.collapse(),this.isOpen=!1)}}]),r}(y);return function(e){s(u,e);var n=l(u);function u(e){var o,s=e.menuElement,r=e.menuItemSelector,i=void 0===r?"li":r,l=e.menuLinkSelector,c=void 0===l?"a":l,m=e.submenuItemSelector,a=void 0===m?"":m,h=e.submenuToggleSelector,d=void 0===h?"a":h,f=e.submenuSelector,v=void 0===f?"ul":f,p=e.controllerElement,g=void 0===p?null:p,y=e.containerElement,b=void 0===y?null:y,E=e.openClass,M=void 0===E?"show":E,C=e.closeClass,S=void 0===C?"hide":C,w=e.isTopLevel,I=void 0===w||w,L=e.parentMenu,A=void 0===L?null:L,O=e.hoverType,j=void 0===O?"off":O,D=e.hoverDelay,x=void 0===D?250:D,z=e.initialize,R=void 0===z||z;return t(this,u),(o=n.call(this,{menuElement:s,menuItemSelector:i,menuLinkSelector:c,submenuItemSelector:a,submenuToggleSelector:d,submenuSelector:v,controllerElement:g,containerElement:b,openClass:M,closeClass:S,isTopLevel:I,parentMenu:A,hoverType:j,hoverDelay:x})).MenuType=u,o.MenuItemType=k,o.MenuToggleType=T,R&&o.initialize(),o}return o(u,[{key:"initialize",value:function(){try{c(r(u.prototype),"initialize",this).call(this),this.isTopLevel?(this.dom.menu.setAttribute("role","tree"),this.elements.menuItems[0].dom.link.tabIndex=0):this.dom.menu.setAttribute("role","group"),this.handleFocus(),this.handleClick(),this.handleHover(),this.handleKeydown(),this.handleKeyup()}catch(e){console.error(e)}}},{key:"handleClick",value:function(){var e=this,t=g("touchstart",this.dom.menu)?"touchstart":"mousedown",n=g("touchend",this.dom.menu)?"touchend":"mouseup";function o(e,t,n){M(n),t.toggle(),t.isOpen&&(e.focusState="self",t.elements.controlledMenu.focusState="none")}this.elements.menuItems.forEach((function(s,r){s.dom.link.addEventListener(t,(function(){e.currentEvent="mouse",e.elements.rootMenu.blurChildren(),e.focusChild(r)})),s.isSubmenuItem?s.elements.toggle.dom.toggle["on".concat(n)]=function(t){e.currentEvent="mouse",o(e,s.elements.toggle,t)}:s.dom.link.addEventListener(n,(function(){e.currentEvent="mouse",e.focusChild(r)}))})),this.isTopLevel&&this.elements.controller&&(this.elements.controller.dom.toggle["on".concat(n)]=function(t){e.currentEvent="mouse",o(e,e.elements.controller,t)})}},{key:"handleKeydown",value:function(){var e=this;c(r(u.prototype),"handleKeydown",this).call(this),this.dom.menu.addEventListener("keydown",(function(t){e.currentEvent="keyboard";var n=E(t);if("Tab"===n&&("none"!==e.elements.rootMenu.focusState?e.elements.rootMenu.blur():e.elements.rootMenu.focus()),"self"===e.focusState){(["Space","ArrowUp","ArrowDown","ArrowLeft","Asterisk","Home","End"].includes(n)||e.currentMenuItem.isSubmenuItem&&["Enter","ArrowRight"].includes(n)||e.elements.controller&&["Escape"].includes(n))&&M(t)}}))}},{key:"handleKeyup",value:function(){var e=this;c(r(u.prototype),"handleKeyup",this).call(this),this.dom.menu.addEventListener("keyup",(function(t){e.currentEvent="keyboard";var n=E(t);if("self"===e.focusState)if("Enter"===n||"Space"===n)M(t),e.currentMenuItem.isSubmenuItem?e.currentMenuItem.elements.toggle.isOpen?e.currentMenuItem.elements.toggle.close():e.currentMenuItem.elements.toggle.preview():e.currentMenuItem.dom.link.click();else if("ArrowDown"===n)M(t),e.currentMenuItem.isSubmenuItem&&e.currentMenuItem.elements.toggle.isOpen?(e.blurCurrentChild(),e.currentMenuItem.elements.childMenu.currentEvent=e.currentEvent,e.currentMenuItem.elements.childMenu.focusFirstChild()):e.isTopLevel||e.currentChild!==e.elements.menuItems.length-1?e.focusNextChild():(e.blurCurrentChild(),e.elements.parentMenu.currentEvent=e.currentEvent,e.elements.parentMenu.focusNextChild());else if("ArrowUp"===n){M(t);var o=e.elements.menuItems[e.currentChild-1];o&&o.isSubmenuItem&&o.elements.toggle.isOpen?(e.blurCurrentChild(),e.currentChild=e.currentChild-1,e.currentMenuItem.elements.childMenu.currentEvent=e.currentEvent,e.currentMenuItem.elements.childMenu.focusLastChild()):e.isTopLevel||0!==e.currentChild?e.focusPreviousChild():(e.elements.parentMenu.currentEvent=e.currentEvent,e.elements.parentMenu.focusCurrentChild())}else"ArrowRight"===n?e.currentMenuItem.isSubmenuItem&&(M(t),e.currentMenuItem.elements.toggle.isOpen?(e.blurCurrentChild(),e.currentMenuItem.elements.childMenu.currentEvent=e.currentEvent,e.currentMenuItem.elements.childMenu.focusFirstChild()):e.currentMenuItem.elements.toggle.preview()):"ArrowLeft"===n?(M(t),e.currentMenuItem.isSubmenuItem&&e.currentMenuItem.elements.toggle.isOpen?(e.currentMenuItem.elements.childMenu.blurCurrentChild(),e.currentMenuItem.elements.toggle.close()):e.isTopLevel||(e.blurCurrentChild(),e.elements.parentMenu.currentEvent=e.currentEvent,e.elements.parentMenu.focusCurrentChild())):"Home"===n?(M(t),e.blurCurrentChild(),e.elements.rootMenu.focusFirstChild()):"End"===n?(M(t),e.blurCurrentChild(),e.elements.rootMenu.focusLastNode()):"Asterisk"===n&&(M(t),e.openChildren())}))}},{key:"focusLastNode",value:function(){var e=this.elements.menuItems.length-1,t=this.elements.menuItems[e];t.isSubmenuItem&&t.elements.toggle.isOpen?(this.currentChild=e,t.elements.childMenu.currentEvent=this.currentEvent,t.elements.childMenu.focusLastNode()):this.focusLastChild()}},{key:"openChildren",value:function(){this.elements.submenuToggles.forEach((function(e){return e.preview()}))}},{key:"blurChildren",value:function(){this.elements.menuItems.forEach((function(e){e.blur(),e.isSubmenuItem&&e.elements.childMenu.blurChildren()}))}}]),u}(C)}();
//# sourceMappingURL=treeview.min.js.map
