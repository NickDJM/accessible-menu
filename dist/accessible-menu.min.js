var AccessibleMenu=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(t,n){try{if("object"!==e(n)){var o=e(n);throw new TypeError("AccessibleMenu: Elements given to isValidInstance() must be inside of an object. ".concat(o," given."))}for(var r in n)if(!(n[r]instanceof t)){var u=e(n[r]);throw new TypeError("AccessibleMenu: ".concat(r," must be an instance of ").concat(t.name,". ").concat(u," given."))}return!0}catch(e){return console.error(e),!1}}function n(t,n){try{if("object"!==e(n)){var o=e(n);throw new TypeError("AccessibleMenu: Values given to isValidType() must be inside of an object. ".concat(o," given."))}for(var r in n){var u=e(n[r]);if(u!==t)throw new TypeError("AccessibleMenu: ".concat(r," must be a ").concat(t,". ").concat(u," given."))}return!0}catch(e){return console.error(e),!1}}function o(t){try{if("object"!==e(t)){var n=e(t);throw new TypeError("AccessibleMenu: Values given to isCSSSelector() must be inside of an object. ".concat(n," given."))}for(var o in t)try{if(null===t[o])throw new Error;document.querySelector(t[o])}catch(e){throw new TypeError("AccessibleMenu: ".concat(o,' must be a valid CSS selector. "').concat(t[o],'" given.'))}return!0}catch(e){return console.error(e),!1}}function r(t){try{if("object"!==e(t)||Array.isArray(t)){var n=e(t);throw new TypeError("AccessibleMenu: Values given to isValidClassList() must be inside of an object. ".concat(n," given."))}var r=function(n){var r=e(t[n]);if("string"!==r){if(!Array.isArray(t[n]))throw new TypeError("AccessibleMenu: ".concat(n," must be a string or an array of strings. ").concat(r," given."));t[n].forEach((function(e){if("string"!=typeof e)throw new TypeError("AccessibleMenu: ".concat(n," must be a string or an array of strings. An array containing non-strings given."))}))}else{var u={};u[n]=t[n],o(u)}};for(var u in t)r(u);return!0}catch(e){return console.error(e),!1}}function u(t){try{if("object"!==e(t)){var n=e(t);throw new TypeError("AccessibleMenu: Values given to isValidHoverType() must be inside of an object. ".concat(n," given."))}var o=["off","on","dynamic"];for(var r in t)if(!o.includes(t[r]))throw new TypeError("AccessibleMenu: ".concat(r," must be one of the following values: ").concat(o.join(", "),'. "').concat(t[r],'" given.'));return!0}catch(e){return console.error(e),!1}}function i(e,o){return!(!n("string",{event:e})||!t(HTMLElement,{element:o}))&&void 0!==o["on".concat(e)]}function l(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var a=function(){function e(t){var n=t.menuToggleElement,o=t.parentElement,r=t.controlledMenu,u=t.parentMenu,i=void 0===u?null:u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.domElements={toggle:n,parent:o},this.menuElements={controlledMenu:r,parentMenu:i},this.isOpen=!1,this.expandEvent=new CustomEvent("accessibleMenuExpand",{bubbles:!0,detail:{toggle:this}}),this.collapseEvent=new CustomEvent("accessibleMenuCollapse",{bubbles:!0,detail:{toggle:this}})}var o,r,u;return o=e,(r=[{key:"initialize",value:function(){if(this.dom.toggle.setAttribute("aria-haspopup","true"),this.dom.toggle.setAttribute("aria-expanded","false"),function(e,o){if(n("string",{tagName:e})&&t(HTMLElement,o)){var r=e.toLowerCase(),u=!0;for(var i in o)o[i].tagName.toLowerCase()!==r&&(u=!1);return u}return!1}("button",{toggle:this.dom.toggle})||this.dom.toggle.setAttribute("role","button"),""===this.dom.toggle.id||""===this.elements.controlledMenu.dom.menu.id){var e=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,10),o=this.dom.toggle.innerText.replace(/[^a-zA-Z0-9\s]/g,""),r=e;!o.replace(/\s/g,"").length&&this.dom.toggle.getAttribute("aria-label")&&(o=this.dom.toggle.getAttribute("aria-label").replace(/[^a-zA-Z0-9\s]/g,"")),o.replace(/\s/g,"").length>0&&((o=o.toLowerCase().replace(/\s+/g,"-")).startsWith("-")&&(o=o.substring(1)),o.endsWith("-")&&(o=o.slice(0,-1)),r="".concat(o,"-").concat(r)),this.dom.toggle.id=this.dom.toggle.id||"".concat(r,"-menu-button"),this.elements.controlledMenu.dom.menu.id=this.elements.controlledMenu.dom.menu.id||"".concat(r,"-menu")}this.elements.controlledMenu.dom.menu.setAttribute("aria-labelledby",this.dom.toggle.id),this.dom.toggle.setAttribute("aria-controls",this.elements.controlledMenu.dom.menu.id),this.collapse(!1)}},{key:"dom",get:function(){return this.domElements}},{key:"elements",get:function(){return this.menuElements}},{key:"isOpen",get:function(){return this.show},set:function(e){n("boolean",{value:e}),this.show=e}},{key:"expand",value:function(){var e,t,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=this.elements.controlledMenu,r=o.closeClass,u=o.openClass;this.dom.toggle.setAttribute("aria-expanded","true"),""!==u&&("string"==typeof u?this.elements.controlledMenu.dom.menu.classList.add(u):(e=this.elements.controlledMenu.dom.menu.classList).add.apply(e,l(u))),""!==r&&("string"==typeof r?this.elements.controlledMenu.dom.menu.classList.remove(r):(t=this.elements.controlledMenu.dom.menu.classList).remove.apply(t,l(r))),n&&this.dom.toggle.dispatchEvent(this.expandEvent)}},{key:"collapse",value:function(){var e,t,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=this.elements.controlledMenu,r=o.closeClass,u=o.openClass;this.dom.toggle.setAttribute("aria-expanded","false"),""!==r&&("string"==typeof r?this.elements.controlledMenu.dom.menu.classList.add(r):(e=this.elements.controlledMenu.dom.menu.classList).add.apply(e,l(r))),""!==u&&("string"==typeof u?this.elements.controlledMenu.dom.menu.classList.remove(u):(t=this.elements.controlledMenu.dom.menu.classList).remove.apply(t,l(u))),n&&this.dom.toggle.dispatchEvent(this.collapseEvent)}},{key:"open",value:function(){this.elements.parentMenu&&(this.elements.parentMenu.focusState="child"),this.elements.controlledMenu.focusState="self",this.expand(),this.isOpen=!0}},{key:"preview",value:function(){this.elements.parentMenu&&(this.elements.parentMenu.focusState="self"),this.elements.controlledMenu.focusState="none",this.expand(),this.isOpen=!0}},{key:"close",value:function(){this.isOpen&&(this.elements.controlledMenu.currentChild=0,this.elements.controlledMenu.blur(),this.elements.parentMenu&&(this.elements.parentMenu.focusState="self"),this.elements.controlledMenu.focusState="none",this.collapse(),this.isOpen=!1)}},{key:"toggle",value:function(){this.isOpen?this.close():this.open()}},{key:"closeSiblings",value:function(){var e=this;this.elements.parentMenu&&this.elements.parentMenu.elements.submenuToggles.forEach((function(t){t!==e&&t.close()}))}},{key:"closeChildren",value:function(){this.elements.controlledMenu.elements.submenuToggles.forEach((function(e){return e.close()}))}}])&&c(o.prototype,r),u&&c(o,u),e}();function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var f=function(){function e(t){var n=t.menuItemElement,o=t.menuLinkElement,r=t.parentMenu,u=t.isSubmenuItem,i=void 0!==u&&u,l=t.childMenu,s=void 0===l?null:l,c=t.toggle,a=void 0===c?null:c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.domElements={item:n,link:o},this.menuElements={parentMenu:r,childMenu:s,toggle:a},this.isController=i}var t,n,o;return t=e,(n=[{key:"initialize",value:function(){}},{key:"dom",get:function(){return this.domElements}},{key:"elements",get:function(){return this.menuElements}},{key:"isSubmenuItem",get:function(){return this.isController}},{key:"focus",value:function(){this.elements.parentMenu.shouldFocus&&this.dom.link.focus()}},{key:"blur",value:function(){this.elements.parentMenu.shouldFocus&&this.dom.link.blur()}}])&&m(t.prototype,n),o&&m(t,o),e}();function h(e){try{var t=e.key||e.keyCode,n={Enter:"Enter"===t||13===t,Space:" "===t||"Spacebar"===t||32===t,Escape:"Escape"===t||"Esc"===t||27===t,ArrowUp:"ArrowUp"===t||"Up"===t||38===t,ArrowRight:"ArrowRight"===t||"Right"===t||39===t,ArrowDown:"ArrowDown"===t||"Down"===t||40===t,ArrowLeft:"ArrowLeft"===t||"Left"===t||37===t,Home:"Home"===t||36===t,End:"End"===t||35===t,Character:isNaN(t)&&!!t.match(/^[a-zA-Z]{1}$/),Tab:"Tab"===t||9===t,Asterisk:"*"===t||56===t};return Object.keys(n).find((function(e){return!0===n[e]}))||""}catch(e){return""}}function p(e){e.preventDefault(),e.stopPropagation()}function d(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function v(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var b=function(){function l(e){var t=e.menuElement,n=e.menuItemSelector,o=void 0===n?"li":n,r=e.menuLinkSelector,u=void 0===r?"a":r,i=e.submenuItemSelector,s=void 0===i?"":i,c=e.submenuToggleSelector,m=void 0===c?"a":c,h=e.submenuSelector,p=void 0===h?"ul":h,d=e.controllerElement,y=void 0===d?null:d,v=e.containerElement,b=void 0===v?null:v,g=e.openClass,M=void 0===g?"show":g,E=e.closeClass,w=void 0===E?"hide":E,C=e.isTopLevel,S=void 0===C||C,I=e.parentMenu,k=void 0===I?null:I,O=e.hoverType,T=void 0===O?"off":O,A=e.hoverDelay,L=void 0===A?250:A;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),this.domElements={menu:t,menuItems:[],submenuItems:[],submenuToggles:[],submenus:[],controller:y,container:b},this.domSelectors={menuItems:o,menuLinks:u,submenuItems:s,submenuToggles:m,submenus:p},this.menuElements={menuItems:[],submenuToggles:[],controller:null,parentMenu:k,rootMenu:S?this:null},this.submenuOpenClass=M||"",this.submenuCloseClass=w||"",this.root=S,this.focussedChild=0,this.state="none",this.event="none",this.hover=T,this.delay=L,this.MenuType=l,this.MenuItemType=f,this.MenuToggleType=a}var s,c,m;return s=l,(c=[{key:"initialize",value:function(){if(!this.validate())throw new Error("AccesibleMenu: cannot initialize menu. See other error messaged for more information.");var e=this.MenuToggleType;if(null===this.elements.rootMenu&&this.findRootMenu(this),this.setDOMElements(),this.isTopLevel&&this.dom.controller&&this.dom.container){var t=new e({menuToggleElement:this.dom.controller,parentElement:this.dom.container,controlledMenu:this});this.menuElements.controller=t}this.createChildElements()}},{key:"dom",get:function(){return this.domElements}},{key:"selectors",get:function(){return this.domSelectors}},{key:"elements",get:function(){return this.menuElements}},{key:"openClass",get:function(){return this.isTopLevel?this.submenuOpenClass:this.elements.rootMenu.openClass},set:function(e){r({openClass:e}),this.submenuOpenClass!==e&&(this.submenuOpenClass=e)}},{key:"closeClass",get:function(){return this.isTopLevel?this.submenuCloseClass:this.elements.rootMenu.closeClass},set:function(e){r({closeClass:e}),this.submenuCloseClass!==e&&(this.submenuCloseClass=e)}},{key:"isTopLevel",get:function(){return this.root}},{key:"currentChild",get:function(){return this.focussedChild},set:function(e){function t(e){if(["mouse","character"].includes(e.currentEvent)&&e.elements.parentMenu)for(var t=0,n=!1;!n&&t<e.elements.parentMenu.elements.menuItems.length;){var o=e.elements.parentMenu.elements.menuItems[t];o.isSubmenuItem&&o.elements.toggle.elements.controlledMenu===e&&(n=!0,e.elements.parentMenu.currentEvent=e.currentEvent,e.elements.parentMenu.currentChild=t),t++}}n("number",{value:e}),e<-1?(this.focussedChild=-1,t(this)):e>=this.elements.menuItems.length?(this.focussedChild=this.elements.menuItems.length-1,t(this)):this.focusChild!==e&&(this.focussedChild=e,t(this))}},{key:"focusState",get:function(){return this.state},set:function(t){!function(t){try{if("object"!==e(t)){var n=e(t);throw new TypeError("AccessibleMenu: Values given to isValidState() must be inside of an object. ".concat(n," given."))}var o=["none","self","child"];for(var r in t)if(!o.includes(t[r]))throw new TypeError("AccessibleMenu: ".concat(r," must be one of the following values: ").concat(o.join(", "),'. "').concat(t[r],'" given.'))}catch(e){return console.error(e),!1}}({value:t}),this.state!==t&&(this.state=t)}},{key:"currentEvent",get:function(){return this.event},set:function(t){!function(t){try{if("object"!==e(t)){var n=e(t);throw new TypeError("AccessibleMenu: Values given to isValidEvent() must be inside of an object. ".concat(n," given."))}var o=["none","mouse","keyboard","character"];for(var r in t)if(!o.includes(t[r]))throw new TypeError("AccessibleMenu: ".concat(r," must be one of the following values: ").concat(o.join(", "),'. "').concat(t[r],'" given.'))}catch(e){return console.error(e),!1}}({value:t}),this.event!==t&&(this.event=t,this.elements.submenuToggles.length>0&&this.elements.submenuToggles.forEach((function(e){e.elements.controlledMenu.currentEvent=t})))}},{key:"currentMenuItem",get:function(){return this.elements.menuItems[this.currentChild]}},{key:"hoverType",get:function(){return this.root?this.hover:this.elements.rootMenu.hoverType},set:function(e){u({value:e}),this.hover!==e&&(this.hover=e)}},{key:"hoverDelay",get:function(){return this.root?this.delay:this.elements.rootMenu.hoverDelay},set:function(e){n("number",{value:e}),this.delay!==e&&(this.delay=e)}},{key:"shouldFocus",get:function(){var e=!1;return"keyboard"!==this.currentEvent&&"character"!==this.currentEvent||(e=!0),"mouse"===this.currentEvent&&"dynamic"===this.hoverType&&(e=!0),e}},{key:"validate",value:function(){var e=this.domElements,i=this.domSelectors,s=this.menuElements,c=this.submenuOpenClass,a=this.submenuCloseClass,m=this.root,f=this.hover,h=this.delay,p=!0;return null!==e.container||null!==e.controller?t(HTMLElement,{menuElement:e.menu,controllerElement:e.controller,containerElement:e.container})||(p=!1):t(HTMLElement,{menuElement:e.menu})||(p=!1),""!==i.submenuItems?o({menuItemSelector:i.menuItems,menuLinkSelector:i.menuLinks,submenuItemSelector:i.submenuItems,submenuToggleSelector:i.submenuToggles,submenuSelector:i.submenus})||(p=!1):o({menuItemSelector:i.menuItems,menuLinkSelector:i.menuLinks})||(p=!1),""===c||r({openClass:c})||(p=!1),""===a||r({closeClass:a})||(p=!1),n("boolean",{isTopLevel:m})||(p=!1),null===s.parentMenu||t(l,{parentMenu:s.parentMenu})||(p=!1),u({hoverType:f})||(p=!1),n("number",{hoverDelay:h})||(p=!1),p}},{key:"setDOMElementType",value:function(e,n,o){if("string"!=typeof this.selectors[e])throw new Error("".concat(e," is not a valid element type within the menu."));n&&t(HTMLElement,{base:n});var r=n||this.dom.menu,u=this.selectors[e],i=Array.from(r.querySelectorAll(u));this.domElements[e]=void 0!==o?"function"==typeof o?i.filter((function(e){return o(e)})):i:i.filter((function(e){return function(e){return e.parentElement===r}(e)}))}},{key:"addDOMElementType",value:function(e,n,o){if("string"!=typeof this.selectors[e])throw new Error("".concat(e," is not a valid element type within the menu."));n&&t(HTMLElement,{base:n});var r=n||this.dom.menu,u=this.selectors[e],i=Array.from(r.querySelectorAll(u));this.domElements[e]=[].concat(d(this.domElements[e]),d(void 0!==o?"function"==typeof o?i.filter((function(e){return o(e)})):i:i.filter((function(e){return function(e){return e.parentElement===r}(e)}))))}},{key:"clearDOMElementType",value:function(e){if("menu"!==e)if(Array.isArray(this.domElements[e]))this.domElements[e]=[];else{if(void 0===this.domElements[e])throw new Error("".concat(e," is not a valid element type within the menu."));this.domElements[e]=null}}},{key:"setDOMElements",value:function(){var e=this;this.setDOMElementType("menuItems"),""!==this.selectors.submenuItems&&(this.setDOMElementType("submenuItems"),this.clearDOMElementType("submenuToggles"),this.clearDOMElementType("submenus"),this.dom.submenuItems.forEach((function(t){e.addDOMElementType("submenuToggles",t),e.addDOMElementType("submenus",t)})))}},{key:"findRootMenu",value:function(e){if(e.isTopLevel)this.menuElements.rootMenu=e;else{if(null===e.elements.parentMenu)throw new Error("Cannot find root menu.");this.findRootMenu(e.elements.parentMenu)}}},{key:"createChildElements",value:function(){var e=this,t=this.MenuType,n=this.MenuItemType,o=this.MenuToggleType;this.dom.menuItems.forEach((function(r){var u;if(e.dom.submenuItems.includes(r)){var i=r.querySelector(e.selectors.submenuToggles),l=r.querySelector(e.selectors.submenus),s=new t({menuElement:l,menuItemSelector:e.selectors.menuItems,menuLinkSelector:e.selectors.menuLinks,submenuItemSelector:e.selectors.submenuItems,submenuToggleSelector:e.selectors.submenuToggles,submenuSelector:e.selectors.submenus,openClass:e.openClass,closeClass:e.closeClass,isTopLevel:!1,parentMenu:e,hoverType:e.hoverType,hoverDelay:e.hoverDelay}),c=new o({menuToggleElement:i,parentElement:r,controlledMenu:s,parentMenu:e});e.menuElements.submenuToggles.push(c),u=new n({menuItemElement:r,menuLinkElement:i,parentMenu:e,isSubmenuItem:!0,childMenu:s,toggle:c})}else{var a=r.querySelector(e.selectors.menuLinks);u=new n({menuItemElement:r,menuLinkElement:a,parentMenu:e})}e.menuElements.menuItems.push(u)}))}},{key:"handleFocus",value:function(){var e=this;this.elements.menuItems.forEach((function(t,n){t.dom.link.addEventListener("focus",(function(){e.elements.parentMenu&&(e.elements.parentMenu.focusState="child"),t.elements.childMenu&&(t.elements.childMenu.focusState="none"),e.focusState="self",e.currentChild=n}))}))}},{key:"handleClick",value:function(){var e=this,t=i("touchstart",this.dom.menu)?"touchstart":"mousedown",n=i("touchend",this.dom.menu)?"touchend":"mouseup";function o(e,t,n){p(n),t.toggle(),t.isOpen&&(e.focusState="self",t.elements.controlledMenu.focusState="none")}this.elements.menuItems.forEach((function(r,u){r.dom.link.addEventListener(t,(function(){e.currentEvent="mouse",e.elements.rootMenu.blurChildren(),e.focusChild(u)})),r.isSubmenuItem&&(r.elements.toggle.dom.toggle["on".concat(n)]=function(t){e.currentEvent="mouse",o(e,r.elements.toggle,t)})})),this.isTopLevel&&this.elements.controller&&(this.elements.controller.dom.toggle["on".concat(n)]=function(t){e.currentEvent="mouse",o(e,e.elements.controller,t)})}},{key:"handleHover",value:function(){var e=this;this.elements.menuItems.forEach((function(t,n){t.dom.link.addEventListener("mouseenter",(function(){if("on"===e.hoverType)e.currentEvent="mouse",e.currentChild=n,t.isSubmenuItem&&t.elements.toggle.preview();else if("dynamic"===e.hoverType){var o=e.elements.submenuToggles.some((function(e){return e.isOpen}));e.currentChild=n,e.isTopLevel&&"none"===e.focusState||(e.currentEvent="mouse",e.focusCurrentChild()),!t.isSubmenuItem||e.isTopLevel&&!o||(e.currentEvent="mouse",t.elements.toggle.preview())}})),t.isSubmenuItem&&t.dom.item.addEventListener("mouseleave",(function(){"on"===e.hoverType?e.hoverDelay>0?setTimeout((function(){e.currentEvent="mouse",t.elements.toggle.close()}),e.hoverDelay):(e.currentEvent="mouse",t.elements.toggle.close()):"dynamic"===e.hoverType&&(e.isTopLevel||(e.hoverDelay>0?setTimeout((function(){e.currentEvent="mouse",t.elements.toggle.close(),e.focusCurrentChild()}),e.hoverDelay):(e.currentEvent="mouse",t.elements.toggle.close(),e.focusCurrentChild())))}))}))}},{key:"handleKeydown",value:function(){var e=this;this.isTopLevel&&this.elements.controller&&this.elements.controller.dom.toggle.addEventListener("keydown",(function(t){e.currentEvent="keyboard";var n=h(t);"Space"!==n&&"Enter"!==n||p(t)}))}},{key:"handleKeyup",value:function(){var e=this;this.isTopLevel&&this.elements.controller&&this.elements.controller.dom.toggle.addEventListener("keyup",(function(t){e.currentEvent="keyboard";var n=h(t);"Space"!==n&&"Enter"!==n||(p(t),e.elements.controller.open(),e.focusFirstChild())}))}},{key:"focus",value:function(){this.focusState="self",this.shouldFocus&&this.dom.menu.focus()}},{key:"blur",value:function(){this.focusState="none",this.shouldFocus&&this.dom.menu.blur()}},{key:"focusCurrentChild",value:function(){-1!==this.currentChild&&this.currentMenuItem.focus()}},{key:"focusChild",value:function(e){this.blurCurrentChild(),this.currentChild=e,this.focusCurrentChild()}},{key:"focusFirstChild",value:function(){this.focusChild(0)}},{key:"focusLastChild",value:function(){this.focusChild(this.elements.menuItems.length-1)}},{key:"focusNextChild",value:function(){this.currentChild<this.elements.menuItems.length-1?this.focusChild(this.currentChild+1):this.focusCurrentChild()}},{key:"focusPreviousChild",value:function(){this.currentChild>0?this.focusChild(this.currentChild-1):this.focusCurrentChild()}},{key:"blurCurrentChild",value:function(){-1!==this.currentChild&&this.currentMenuItem.blur()}},{key:"focusController",value:function(){this.dom.controller&&(this.shouldFocus&&this.dom.controller.focus(),this.focusState="none")}},{key:"focusContainer",value:function(){this.dom.container&&(this.shouldFocus&&this.dom.container.focus(),this.focusState="none")}},{key:"closeChildren",value:function(){this.elements.submenuToggles.forEach((function(e){return e.close()}))}},{key:"blurChildren",value:function(){this.elements.menuItems.forEach((function(e){e.blur(),e.isSubmenuItem&&e.elements.childMenu.blurChildren()}))}}])&&v(s.prototype,c),m&&v(s,m),l}();function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=C(e);if(t){var r=C(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(n,e);var t=E(n);function n(e){var o,r=e.menuItemElement,u=e.menuLinkElement,i=e.parentMenu,l=e.isSubmenuItem,s=void 0!==l&&l,c=e.childMenu,a=void 0===c?null:c,m=e.toggle,f=void 0===m?null:m,h=e.initialize,p=void 0===h||h;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),o=t.call(this,{menuItemElement:r,menuLinkElement:u,parentMenu:i,isSubmenuItem:s,childMenu:a,toggle:f}),p&&o.initialize(),o}return n}(f);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function O(e,t,n){return(O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=j(e);if(t){var r=j(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return L(this,n)}}function L(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(u,e);var t,n,o,r=A(u);function u(e){var t,n=e.menuToggleElement,o=e.parentElement,i=e.controlledMenu,l=e.parentMenu,s=void 0===l?null:l,c=e.initialize,a=void 0===c||c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),t=r.call(this,{menuToggleElement:n,parentElement:o,controlledMenu:i,parentMenu:s}),a&&t.initialize(),t}return t=u,(n=[{key:"open",value:function(){this.closeSiblings(),O(j(u.prototype),"open",this).call(this)}},{key:"preview",value:function(){this.closeSiblings(),O(j(u.prototype),"preview",this).call(this)}},{key:"close",value:function(){this.isOpen&&this.closeChildren(),O(j(u.prototype),"close",this).call(this)}}])&&k(t.prototype,n),o&&k(t,o),u}(a);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function x(e,t,n){return(x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=F(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=F(e);if(t){var r=F(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return K(this,n)}}function K(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(l,e);var t,o,r,u=z(l);function l(e){var t,n=e.menuElement,o=e.menuItemSelector,r=void 0===o?"li":o,i=e.menuLinkSelector,s=void 0===i?"a":i,c=e.submenuItemSelector,a=void 0===c?"":c,m=e.submenuToggleSelector,f=void 0===m?"a":m,h=e.submenuSelector,p=void 0===h?"ul":h,d=e.controllerElement,y=void 0===d?null:d,v=e.containerElement,b=void 0===v?null:v,g=e.openClass,M=void 0===g?"show":g,E=e.closeClass,w=void 0===E?"hide":E,C=e.isTopLevel,I=void 0===C||C,k=e.parentMenu,O=void 0===k?null:k,T=e.hoverType,A=void 0===T?"off":T,L=e.hoverDelay,j=void 0===L?250:L,P=e.optionalKeySupport,_=void 0!==P&&P,x=e.initialize,D=void 0===x||x;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=u.call(this,{menuElement:n,menuItemSelector:r,menuLinkSelector:s,submenuItemSelector:a,submenuToggleSelector:f,submenuSelector:p,controllerElement:y,containerElement:b,openClass:M,closeClass:w,isTopLevel:I,parentMenu:O,hoverType:A,hoverDelay:j})).MenuType=l,t.MenuItemType=S,t.MenuToggleType=R,t.currentChild=-1,t.optionalKeySupport=_,D&&t.initialize(),t}return t=l,(o=[{key:"optionalKeySupport",get:function(){return this.isTopLevel?this.optionalSupport:this.elements.rootMenu.optionalKeySupport},set:function(e){n("boolean",{optionalKeySupport:e}),this.optionalSupport=e}},{key:"initialize",value:function(){try{x(F(l.prototype),"initialize",this).call(this),this.handleFocus(),this.handleClick(),this.handleHover(),this.handleKeydown(),this.handleKeyup()}catch(e){console.error(e)}}},{key:"handleClick",value:function(){var e=this;x(F(l.prototype),"handleClick",this).call(this);var t=i("touchend",this.dom.menu)?"touchend":"mouseup";document.addEventListener(t,(function(t){"none"!==e.focusState&&(e.currentEvent="mouse",e.dom.menu.contains(t.target)||!e.dom.menu===t.target||(e.closeChildren(),e.blur(),e.elements.controller&&e.elements.controller.close()))}))}},{key:"handleKeydown",value:function(){var e=this;x(F(l.prototype),"handleKeydown",this).call(this),this.dom.menu.addEventListener("keydown",(function(t){e.currentEvent="keyboard";var n=h(t);"self"===e.focusState&&(e.optionalKeySupport?["ArrowUp","ArrowRight","ArrowDown","ArrowLeft","Home","End"].includes(n)&&p(t):(e.currentMenuItem.isSubmenuItem&&["Space","Enter"].includes(n)||e.elements.controller&&["Escape"].includes(n)||e.elements.parentMenu&&["Escape"].includes(n))&&p(t))}))}},{key:"handleKeyup",value:function(){var e=this;x(F(l.prototype),"handleKeyup",this).call(this),this.dom.menu.addEventListener("keyup",(function(t){e.currentEvent="keyboard";var n=h(t);"self"===e.focusState&&("Space"===n||"Enter"===n?e.currentMenuItem.isSubmenuItem?(p(t),e.currentMenuItem.elements.toggle.preview()):e.currentMenuItem.dom.link.click():"Escape"===n?e.elements.submenuToggles.some((function(e){return e.isOpen}))?(p(t),e.closeChildren()):e.elements.parentMenu?(p(t),e.elements.parentMenu.currentEvent=e.currentEvent,e.elements.parentMenu.closeChildren(),e.elements.parentMenu.focusCurrentChild()):e.isTopLevel&&e.elements.controller&&e.elements.controller.isOpen&&(e.elements.controller.close(),e.focusController()):e.optionalKeySupport&&("ArrowDown"===n||"ArrowRight"===n?(p(t),e.currentMenuItem.isSubmenuItem&&e.currentMenuItem.elements.toggle.isOpen?(e.currentMenuItem.elements.childMenu.currentEvent="keyboard",e.currentMenuItem.elements.childMenu.focusFirstChild()):e.focusNextChild()):"ArrowUp"===n||"ArrowLeft"===n?(p(t),e.focusPreviousChild()):"Home"===n?(p(t),e.focusFirstChild()):"End"===n&&(p(t),e.focusLastChild())))}))}}])&&_(t.prototype,o),r&&_(t,r),l}(b);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function U(e,t,n){return(U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=$(e);if(t){var r=$(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return W(this,n)}}function W(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(u,e);var t,n,o,r=q(u);function u(e){var t,n=e.menuItemElement,o=e.menuLinkElement,i=e.parentMenu,l=e.isSubmenuItem,s=void 0!==l&&l,c=e.childMenu,a=void 0===c?null:c,m=e.toggle,f=void 0===m?null:m,h=e.initialize,p=void 0===h||h;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),t=r.call(this,{menuItemElement:n,menuLinkElement:o,parentMenu:i,isSubmenuItem:s,childMenu:a,toggle:f}),p&&t.initialize(),t}return t=u,(n=[{key:"initialize",value:function(){U($(u.prototype),"initialize",this).call(this),this.dom.item.setAttribute("role","none"),this.dom.link.setAttribute("role","menuitem"),this.dom.link.tabIndex=-1}},{key:"focus",value:function(){U($(u.prototype),"focus",this).call(this),this.elements.parentMenu.isTopLevel&&(this.dom.link.tabIndex=0)}},{key:"blur",value:function(){U($(u.prototype),"blur",this).call(this),this.elements.parentMenu.isTopLevel&&(this.dom.link.tabIndex=-1)}}])&&B(t.prototype,n),o&&B(t,o),u}(f);function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Q(e,t,n){return(Q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=te(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=te(e);if(t){var r=te(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return ee(this,n)}}function ee(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(u,e);var t,n,o,r=Y(u);function u(e){var t,n=e.menuToggleElement,o=e.parentElement,i=e.controlledMenu,l=e.parentMenu,s=void 0===l?null:l,c=e.initialize,a=void 0===c||c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),t=r.call(this,{menuToggleElement:n,parentElement:o,controlledMenu:i,parentMenu:s}),a&&t.initialize(),t}return t=u,(n=[{key:"open",value:function(){this.closeSiblings(),Q(te(u.prototype),"open",this).call(this)}},{key:"preview",value:function(){this.closeSiblings(),Q(te(u.prototype),"preview",this).call(this)}},{key:"close",value:function(){this.isOpen&&this.closeChildren(),Q(te(u.prototype),"close",this).call(this)}}])&&J(t.prototype,n),o&&J(t,o),u}(a);function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ue(e,t,n){return(ue="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ce(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=ce(e);if(t){var r=ce(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return se(this,n)}}function se(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(u,e);var t,n,o,r=le(u);function u(e){var t,n=e.menuElement,o=e.menuItemSelector,i=void 0===o?"li":o,l=e.menuLinkSelector,s=void 0===l?"a":l,c=e.submenuItemSelector,a=void 0===c?"":c,m=e.submenuToggleSelector,f=void 0===m?"a":m,h=e.submenuSelector,p=void 0===h?"ul":h,d=e.controllerElement,y=void 0===d?null:d,v=e.containerElement,b=void 0===v?null:v,g=e.openClass,M=void 0===g?"show":g,E=e.closeClass,w=void 0===E?"hide":E,C=e.isTopLevel,S=void 0===C||C,I=e.parentMenu,k=void 0===I?null:I,O=e.hoverType,T=void 0===O?"off":O,A=e.hoverDelay,L=void 0===A?250:A,j=e.initialize,R=void 0===j||j;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=r.call(this,{menuElement:n,menuItemSelector:i,menuLinkSelector:s,submenuItemSelector:a,submenuToggleSelector:f,submenuSelector:p,controllerElement:y,containerElement:b,openClass:M,closeClass:w,isTopLevel:S,parentMenu:k,hoverType:T,hoverDelay:L})).MenuType=u,t.MenuItemType=Z,t.MenuToggleType=ne,R&&t.initialize(),t}return t=u,(n=[{key:"initialize",value:function(){try{ue(ce(u.prototype),"initialize",this).call(this),this.dom.menu.setAttribute("role","menubar"),this.handleFocus(),this.handleClick(),this.handleHover(),this.handleKeydown(),this.handleKeyup(),this.isTopLevel&&(this.elements.menuItems[0].dom.link.tabIndex=0)}catch(e){console.error(e)}}},{key:"handleClick",value:function(){var e=this;ue(ce(u.prototype),"handleClick",this).call(this);var t=i("touchend",this.dom.menu)?"touchend":"mouseup";document.addEventListener(t,(function(t){"none"!==e.focusState&&(e.currentEvent="mouse",e.dom.menu.contains(t.target)||!e.dom.menu===t.target||(e.closeChildren(),e.blur(),e.elements.controller&&e.elements.controller.close()))}))}},{key:"handleKeydown",value:function(){var e=this;ue(ce(u.prototype),"handleKeydown",this).call(this),this.dom.menu.addEventListener("keydown",(function(t){e.currentEvent="keyboard";var n=h(t);"Tab"===n&&("none"!==e.elements.rootMenu.focusState?(e.elements.rootMenu.blur(),e.elements.rootMenu.closeChildren()):e.elements.rootMenu.focus()),"Character"===n?p(t):e.isTopLevel?"self"===e.focusState&&(["ArrowRight","ArrowLeft","Home","End"].includes(n)||e.currentMenuItem.isSubmenuItem&&["Space","Enter","ArrowDown","ArrowUp"].includes(n)||e.elements.controller&&["Escape"].includes(n))&&p(t):(["Escape","ArrowRight","ArrowLeft","ArrowDown","ArrowUp","Home","End"].includes(n)||e.currentMenuItem.isSubmenuItem&&["Space","Enter"].includes(n))&&p(t)}))}},{key:"handleKeyup",value:function(){var e=this;ue(ce(u.prototype),"handleKeyup",this).call(this),this.dom.menu.addEventListener("keyup",(function(t){e.currentEvent="keyboard";var n=h(t),o=t.altKey,r=t.crtlKey,u=t.metaKey;if("Character"!==n||o||r||u)if(e.isTopLevel){if("self"===e.focusState)if("Space"===n||"Enter"===n)e.currentMenuItem.isSubmenuItem?(p(t),e.currentMenuItem.elements.childMenu.currentEvent="keyboard",e.currentMenuItem.elements.toggle.open(),requestAnimationFrame((function(){e.currentMenuItem.elements.childMenu.focusFirstChild()}))):e.currentMenuItem.dom.link.click();else if("ArrowRight"===n){p(t);var i=e.currentMenuItem.isSubmenuItem&&e.currentMenuItem.elements.toggle.isOpen;e.focusNextChild(),i&&(e.currentMenuItem.isSubmenuItem?(e.currentMenuItem.elements.childMenu.currentEvent="keyboard",e.currentMenuItem.elements.toggle.preview()):e.closeChildren())}else if("ArrowLeft"===n){p(t);var l=e.currentMenuItem.isSubmenuItem&&e.currentMenuItem.elements.toggle.isOpen;e.focusPreviousChild(),l&&(e.currentMenuItem.isSubmenuItem?(e.currentMenuItem.elements.childMenu.currentEvent="keyboard",e.currentMenuItem.elements.toggle.preview()):e.closeChildren())}else"ArrowDown"===n?e.currentMenuItem.isSubmenuItem&&(p(t),e.currentMenuItem.elements.childMenu.currentEvent="keyboard",e.currentMenuItem.elements.toggle.open(),requestAnimationFrame((function(){e.currentMenuItem.elements.childMenu.focusFirstChild()}))):"ArrowUp"===n?e.currentMenuItem.isSubmenuItem&&(p(t),e.currentMenuItem.elements.childMenu.currentEvent="keyboard",e.currentMenuItem.elements.toggle.open(),requestAnimationFrame((function(){e.currentMenuItem.elements.childMenu.focusLastChild()}))):"Home"===n?(p(t),e.focusFirstChild()):"End"===n?(p(t),e.focusLastChild()):"Escape"===n&&(e.elements.submenuToggles.some((function(e){return e.isOpen}))?(p(t),e.closeChildren()):e.isTopLevel&&e.elements.controller&&e.elements.controller.isOpen&&(p(t),e.elements.controller.close(),e.focusController()))}else"Space"===n||"Enter"===n?e.currentMenuItem.isSubmenuItem&&(p(t),e.currentMenuItem.elements.childMenu.currentEvent="keyboard",e.currentMenuItem.elements.toggle.open(),requestAnimationFrame((function(){e.currentMenuItem.elements.childMenu.focusFirstChild()}))):"Escape"===n?(p(t),e.elements.rootMenu.closeChildren(),e.elements.rootMenu.focusCurrentChild()):"ArrowRight"===n?e.currentMenuItem.isSubmenuItem?(p(t),e.currentMenuItem.elements.childMenu.currentEvent="keyboard",e.currentMenuItem.elements.toggle.open(),requestAnimationFrame((function(){e.currentMenuItem.elements.childMenu.focusFirstChild()}))):(p(t),e.elements.rootMenu.closeChildren(),e.elements.rootMenu.focusNextChild(),e.elements.rootMenu.currentMenuItem.isSubmenuItem&&e.elements.rootMenu.currentMenuItem.elements.toggle.preview()):"ArrowLeft"===n?e.elements.parentMenu.currentMenuItem.isSubmenuItem&&(p(t),e.elements.parentMenu.currentMenuItem.elements.toggle.close(),e.elements.parentMenu.focusCurrentChild(),e.elements.parentMenu===e.elements.rootMenu&&(e.elements.rootMenu.closeChildren(),e.elements.rootMenu.focusPreviousChild(),e.elements.rootMenu.currentMenuItem.isSubmenuItem&&(e.elements.rootMenu.currentMenuItem.elements.childMenu.currentEvent="keyboard",e.elements.rootMenu.currentMenuItem.elements.toggle.preview()))):"ArrowDown"===n?(p(t),e.focusNextChild()):"ArrowUp"===n?(p(t),e.focusPreviousChild()):"Home"===n?(p(t),e.focusFirstChild()):"End"===n&&(p(t),e.focusLastChild());else p(t),e.elements.rootMenu.currentEvent="character",e.focusNextChildWithCharacter(t.key)}))}},{key:"focusNextChild",value:function(){this.currentChild===this.elements.menuItems.length-1?this.focusFirstChild():this.focusChild(this.currentChild+1)}},{key:"focusPreviousChild",value:function(){0===this.currentChild?this.focusLastChild():this.focusChild(this.currentChild-1)}},{key:"focusNextChildWithCharacter",value:function(e){for(var t=e.toLowerCase(),n=this.currentChild+1,o=!1;!o&&n<this.elements.menuItems.length;)(this.elements.menuItems[n].dom.item.innerText?this.elements.menuItems[n].dom.item.innerText:this.elements.menuItems[n].dom.item.textContent).replace(/[\s]/g,"").toLowerCase().charAt(0)===t&&(o=!0,this.focusChild(n)),n++}}])&&re(t.prototype,n),o&&re(t,o),u}(b);function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function he(e,t,n){return(he="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ve(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=ve(e);if(t){var r=ve(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return ye(this,n)}}function ye(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(u,e);var t,n,o,r=de(u);function u(e){var t,n=e.menuItemElement,o=e.menuLinkElement,i=e.parentMenu,l=e.isSubmenuItem,s=void 0!==l&&l,c=e.childMenu,a=void 0===c?null:c,m=e.toggle,f=void 0===m?null:m,h=e.initialize,p=void 0===h||h;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),t=r.call(this,{menuItemElement:n,menuLinkElement:o,parentMenu:i,isSubmenuItem:s,childMenu:a,toggle:f}),p&&t.initialize(),t}return t=u,(n=[{key:"initialize",value:function(){he(ve(u.prototype),"initialize",this).call(this),this.dom.item.setAttribute("role","none"),this.dom.link.setAttribute("role","treeitem"),this.dom.link.tabIndex=-1}},{key:"focus",value:function(){he(ve(u.prototype),"focus",this).call(this),this.dom.link.tabIndex=0}},{key:"blur",value:function(){he(ve(u.prototype),"blur",this).call(this),this.dom.link.tabIndex=-1}}])&&fe(t.prototype,n),o&&fe(t,o),u}(f);function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Ce(e);if(t){var r=Ce(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return we(this,n)}}function we(e,t){return!t||"object"!==ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(n,e);var t=Ee(n);function n(e){var o,r=e.menuToggleElement,u=e.parentElement,i=e.controlledMenu,l=e.parentMenu,s=void 0===l?null:l,c=e.initialize,a=void 0===c||c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),o=t.call(this,{menuToggleElement:r,parentElement:u,controlledMenu:i,parentMenu:s}),a&&o.initialize(),o}return n}(a);function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(e){return function(e){if(Array.isArray(e))return Oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Te(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ae(e,t,n){return(Ae="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pe(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Pe(e);if(t){var r=Pe(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Re(this,n)}}function Re(e,t){return!t||"object"!==Ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}return{DisclosureMenu:H,Menubar:ae,Treeview:function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(u,e);var t,n,o,r=je(u);function u(e){var t,n=e.menuElement,o=e.menuItemSelector,i=void 0===o?"li":o,l=e.menuLinkSelector,s=void 0===l?"a":l,c=e.submenuItemSelector,a=void 0===c?"":c,m=e.submenuToggleSelector,f=void 0===m?"a":m,h=e.submenuSelector,p=void 0===h?"ul":h,d=e.controllerElement,y=void 0===d?null:d,v=e.containerElement,b=void 0===v?null:v,g=e.openClass,M=void 0===g?"show":g,E=e.closeClass,w=void 0===E?"hide":E,C=e.isTopLevel,S=void 0===C||C,I=e.parentMenu,k=void 0===I?null:I,O=e.hoverType,T=void 0===O?"off":O,A=e.hoverDelay,L=void 0===A?250:A,j=e.initialize,R=void 0===j||j;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=r.call(this,{menuElement:n,menuItemSelector:i,menuLinkSelector:s,submenuItemSelector:a,submenuToggleSelector:f,submenuSelector:p,controllerElement:y,containerElement:b,openClass:M,closeClass:w,isTopLevel:S,parentMenu:k,hoverType:T,hoverDelay:L})).MenuType=u,t.MenuItemType=be,t.MenuToggleType=Se,R&&t.initialize(),t}return t=u,(n=[{key:"initialize",value:function(){try{Ae(Pe(u.prototype),"initialize",this).call(this),this.isTopLevel?(this.dom.menu.setAttribute("role","tree"),this.elements.menuItems[0].dom.link.tabIndex=0):this.dom.menu.setAttribute("role","group"),this.handleFocus(),this.handleClick(),this.handleHover(),this.handleKeydown(),this.handleKeyup()}catch(e){console.error(e)}}},{key:"handleKeydown",value:function(){var e=this;Ae(Pe(u.prototype),"handleKeydown",this).call(this),this.dom.menu.addEventListener("keydown",(function(t){e.currentEvent="keyboard";var n=h(t);"Tab"===n&&("none"!==e.elements.rootMenu.focusState?e.elements.rootMenu.blur():e.elements.rootMenu.focus()),"self"===e.focusState&&(["Space","ArrowUp","ArrowDown","ArrowLeft","Asterisk","Home","End"].includes(n)||e.currentMenuItem.isSubmenuItem&&["Enter","ArrowRight"].includes(n)||e.elements.controller&&["Escape"].includes(n))&&p(t)}))}},{key:"handleKeyup",value:function(){var e=this;Ae(Pe(u.prototype),"handleKeyup",this).call(this),this.dom.menu.addEventListener("keyup",(function(t){e.currentEvent="keyboard";var n=h(t),o=t.altKey,r=t.crtlKey,u=t.metaKey;if("Character"!==n||o||r||u){if("self"===e.focusState)if("Enter"===n||"Space"===n)p(t),e.currentMenuItem.isSubmenuItem?e.currentMenuItem.elements.toggle.isOpen?e.currentMenuItem.elements.toggle.close():e.currentMenuItem.elements.toggle.preview():e.currentMenuItem.dom.link.click();else if("Escape"===n)e.isTopLevel&&e.elements.controller&&e.elements.controller.isOpen&&(e.elements.controller.close(),e.focusController());else if("ArrowDown"===n)p(t),e.currentMenuItem.isSubmenuItem&&e.currentMenuItem.elements.toggle.isOpen?(e.blurCurrentChild(),e.currentMenuItem.elements.childMenu.currentEvent=e.currentEvent,e.currentMenuItem.elements.childMenu.focusFirstChild()):e.isTopLevel||e.currentChild!==e.elements.menuItems.length-1?e.focusNextChild():(e.blurCurrentChild(),e.elements.parentMenu.currentEvent=e.currentEvent,e.elements.parentMenu.focusNextChild());else if("ArrowUp"===n){p(t);var i=e.elements.menuItems[e.currentChild-1];i&&i.isSubmenuItem&&i.elements.toggle.isOpen?(e.blurCurrentChild(),e.currentChild=e.currentChild-1,e.currentMenuItem.elements.childMenu.currentEvent=e.currentEvent,e.currentMenuItem.elements.childMenu.focusLastChild()):e.isTopLevel||0!==e.currentChild?e.focusPreviousChild():(e.blurCurrentChild(),e.elements.parentMenu.currentEvent=e.currentEvent,e.elements.parentMenu.focusCurrentChild())}else"ArrowRight"===n?e.currentMenuItem.isSubmenuItem&&(p(t),e.currentMenuItem.elements.toggle.isOpen?(e.blurCurrentChild(),e.currentMenuItem.elements.childMenu.currentEvent=e.currentEvent,e.currentMenuItem.elements.childMenu.focusFirstChild()):e.currentMenuItem.elements.toggle.preview()):"ArrowLeft"===n?(p(t),e.currentMenuItem.isSubmenuItem&&e.currentMenuItem.elements.toggle.isOpen?(e.currentMenuItem.elements.childMenu.blurCurrentChild(),e.currentMenuItem.elements.toggle.close()):e.isTopLevel||(e.blurCurrentChild(),e.elements.parentMenu.currentEvent=e.currentEvent,e.elements.parentMenu.focusCurrentChild())):"Home"===n?(p(t),e.blurCurrentChild(),e.elements.rootMenu.focusFirstChild()):"End"===n?(p(t),e.blurCurrentChild(),e.elements.rootMenu.focusLastNode()):"Asterisk"===n&&(p(t),e.openChildren())}else p(t),e.elements.rootMenu.currentEvent="character",e.focusNextNodeWithCharacter(t.key)}))}},{key:"focusLastNode",value:function(){var e=this.elements.menuItems.length-1,t=this.elements.menuItems[e];t.isSubmenuItem&&t.elements.toggle.isOpen?(this.currentChild=e,t.elements.childMenu.currentEvent=this.currentEvent,t.elements.childMenu.focusLastNode()):this.focusLastChild()}},{key:"openChildren",value:function(){this.elements.submenuToggles.forEach((function(e){return e.preview()}))}},{key:"focusNextNodeWithCharacter",value:function(e){for(var t=e.toLowerCase(),n=function e(t){var n=[];return t.elements.menuItems.forEach((function(t){n.push(t),t.isSubmenuItem&&t.elements.toggle.isOpen&&(n=[].concat(ke(n),ke(e(t.elements.toggle.elements.controlledMenu))))})),n}(this.elements.rootMenu),o=n.indexOf(this.currentMenuItem)+1,r=[].concat(ke(n.slice(o)),ke(n.slice(0,o))),u=0,i=!1;!i&&u<r.length;){if((r[u].dom.item.innerText?r[u].dom.item.innerText:r[u].dom.item.textContent).replace(/[\s]/g,"").toLowerCase().charAt(0)===t){i=!0;var l=r[u].elements.parentMenu,s=l.elements.menuItems.indexOf(r[u]);this.elements.rootMenu.blurChildren(),l.focusChild(s)}u++}}}])&&Te(t.prototype,n),o&&Te(t,o),u}(b)}}();
//# sourceMappingURL=accessible-menu.min.js.map
