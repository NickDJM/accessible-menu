var AccessibleMenu=function(){"use strict";var e,t,n,r;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){var t="element";try{if(e instanceof HTMLElement)return!0;if("object"!==o(e))throw Error;for(var n in e)if(t=n,!(e[n]instanceof HTMLElement))throw Error}catch(e){throw new TypeError("".concat(t," must be an HTML Element."))}}function i(e){c(e);var t="value";try{if("object"===o(e))for(var n in e){if(t=n,"string"!=typeof e[n])throw Error;document.querySelector(e[n])}else document.querySelector(e);return!0}catch(e){throw new TypeError("".concat(t," must be a valid CSS selector."))}}function l(e){var t="value";try{if("boolean"==typeof e)return!0;if("object"!==o(e))throw Error;for(var n in e)if(t=n,"boolean"!=typeof e[n])throw Error}catch(e){throw new TypeError("".concat(t," must be a boolean."))}}function u(e){var t="value";try{if("number"==typeof e)return!0;if("object"!==o(e))throw Error;for(var n in e)if(t=n,"number"!=typeof e[n])throw Error}catch(e){throw new TypeError("".concat(t," must be a number."))}}function c(e){var t="value";try{if("string"==typeof e)return!0;if("object"!==o(e))throw Error;for(var n in e)if(t=n,"string"!=typeof e[n])throw Error}catch(e){throw new TypeError("".concat(t," must be a string."))}}function a(e){var t="element";try{if(e instanceof w)return!0;if("object"!==o(e))throw Error;for(var n in e)if(t=n,!(e[n]instanceof w))throw Error}catch(e){throw new TypeError("".concat(t," must be an instance of either BaseMenu, Menubar, or DisclosureMenu"))}}function m(e,t){return c(e),s(t),void 0!==t["on".concat(e)]}function h(e){var t="value";try{if("string"==typeof e)return!0;if("object"===o(e)){for(var n in e)if(t=n,"string"!=typeof e[n]){if(!Array.isArray(e[n]))throw Error;e[n].forEach((function(e){c(e)}))}}else{if(!Array.isArray(e))throw Error;c(e)}}catch(e){throw new TypeError("".concat(t," must be either a string or an array of strings."))}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Array.from||(Array.from=(e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=Math.pow(2,53)-1,r=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),n)},function(e){var n=this,o=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var s,i=arguments.length>1?arguments[1]:void 0;if(void 0!==i){if(!t(i))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(s=arguments[2])}for(var l,u=r(o.length),c=t(n)?Object(new n(u)):new Array(u),a=0;a<u;)l=o[a],c[a]=i?void 0===s?i(l,a):i.call(s,l,a):l,a+=1;return c.length=u,c})),Array.includes||(Array.prototype.includes=function(e){return!!~this.indexOf(e)}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var s=t[o];if(e.call(r,s,o,t))return s;o++}},configurable:!0,writable:!0}),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(e,t){var n=t>0?0|t:0;return this.substring(n,n+e.length)===e}}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}}();var d=function(){function e(t){var n=t.menuToggleElement,r=t.parentElement,o=t.controlledMenu,i=t.openClass,l=void 0===i?"show":i,u=t.closeClass,c=void 0===u?"hide":u,m=t.parentMenu,h=void 0===m?null:m;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s({menuToggleElement:n,parentElement:r}),a(null!==h?{controlledMenu:o,parentMenu:h}:{controlledMenu:o}),this.domElements={toggle:n,parent:r},this.menuElements={controlledMenu:o,parentMenu:h},this.openClass=l||"",this.closeClass=c||"",this.isOpen=!1,this.expandEvent=new CustomEvent("accessibleMenuExpand",{bubbles:!0,detail:{toggle:this}}),this.collapseEvent=new CustomEvent("accessibleMenuCollapse",{bubbles:!0,detail:{toggle:this}}),this.initialize()}var t,n,r;return t=e,(n=[{key:"initialize",value:function(){var e=this;if(this.dom.toggle.setAttribute("aria-haspopup","true"),this.dom.toggle.setAttribute("aria-expanded","false"),function(e,t){c(e),s(t);var n=e.toLowerCase();if(t instanceof HTMLElement)return t.tagName.toLowerCase()===n;var r=!0;for(var o in t)t[o].tagName.toLowerCase()!==n&&(r=!1);return r}("button",this.dom.toggle)||this.dom.toggle.setAttribute("role","button"),""===this.dom.toggle.id||""===this.elements.controlledMenu.dom.menu.id){var t=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,10),n=this.dom.toggle.innerText.replace(/[^a-zA-Z0-9\s]/g,""),r=t;!n.replace(/\s/g,"").length&&this.dom.toggle.getAttribute("aria-label")&&(n=this.dom.toggle.getAttribute("aria-label").replace(/[^a-zA-Z0-9\s]/g,"")),n.replace(/\s/g,"").length>0&&((n=n.toLowerCase().replace(/\s+/g,"-")).startsWith("-")&&(n=n.substring(1)),n.endsWith("-")&&(n=n.slice(0,-1)),r="".concat(n,"-").concat(r)),this.dom.toggle.id=this.dom.toggle.id||"".concat(r,"-menu-button"),this.elements.controlledMenu.dom.menu.id=this.elements.controlledMenu.dom.menu.id||"".concat(r,"-menu")}this.elements.controlledMenu.dom.menu.setAttribute("aria-labelledby",this.dom.toggle.id),this.dom.toggle.setAttribute("aria-controls",this.elements.controlledMenu.dom.menu.id),""!==this.closeClass&&("string"==typeof this.closeClass?this.elements.controlledMenu.dom.menu.classList.add(this.closeClass):Array.isArray(this.closeClass)&&this.closeClass.forEach((function(t){e.elements.controlledMenu.dom.menu.classList.add(t)})))}},{key:"dom",get:function(){return this.domElements}},{key:"elements",get:function(){return this.menuElements}},{key:"isOpen",get:function(){return this.show},set:function(e){l({value:e}),this.show=e}},{key:"openClass",get:function(){return this.controlledMenuOpenClass},set:function(e){h({openClass:e}),this.controlledMenuOpenClass=e}},{key:"closeClass",get:function(){return this.controlledMenuCloseClass},set:function(e){h({closeClass:e}),this.controlledMenuCloseClass=e}},{key:"expand",value:function(){var e=this;this.dom.toggle.setAttribute("aria-expanded","true"),""!==this.openClass&&("string"==typeof this.openClass?this.elements.controlledMenu.dom.menu.classList.add(this.openClass):Array.isArray(this.openClass)&&this.openClass.forEach((function(t){e.elements.controlledMenu.dom.menu.classList.add(t)}))),""!==this.closeClass&&("string"==typeof this.closeClass?this.elements.controlledMenu.dom.menu.classList.remove(this.closeClass):Array.isArray(this.closeClass)&&this.closeClass.forEach((function(t){e.elements.controlledMenu.dom.menu.classList.remove(t)}))),this.dom.toggle.dispatchEvent(this.expandEvent)}},{key:"collapse",value:function(){var e=this;this.dom.toggle.setAttribute("aria-expanded","false"),""!==this.closeClass&&("string"==typeof this.closeClass?this.elements.controlledMenu.dom.menu.classList.add(this.closeClass):Array.isArray(this.closeClass)&&this.closeClass.forEach((function(t){e.elements.controlledMenu.dom.menu.classList.add(t)}))),""!==this.openClass&&("string"==typeof this.openClass?this.elements.controlledMenu.dom.menu.classList.remove(this.openClass):Array.isArray(this.openClass)&&this.openClass.forEach((function(t){e.elements.controlledMenu.dom.menu.classList.remove(t)}))),this.dom.toggle.dispatchEvent(this.collapseEvent)}},{key:"open",value:function(){this.isOpen=!0,this.expand(),this.closeSiblings(),this.elements.parentMenu&&(this.elements.parentMenu.focusState="child"),this.elements.controlledMenu.focusState="self"}},{key:"preview",value:function(){this.isOpen=!0,this.expand(),this.closeSiblings(),this.elements.parentMenu&&(this.elements.parentMenu.focusState="self"),this.elements.controlledMenu.focusState="none"}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.collapse(),this.closeChildren(),this.elements.controlledMenu.currentChild=0,this.elements.controlledMenu.blur(),this.elements.parentMenu&&(this.elements.parentMenu.focusState="self"))}},{key:"toggle",value:function(){this.isOpen?this.close():this.open()}},{key:"closeSiblings",value:function(){var e=this;this.elements.parentMenu&&this.elements.parentMenu.elements.submenuToggles.forEach((function(t){t!==e&&t.close()}))}},{key:"closeChildren",value:function(){this.elements.controlledMenu.elements.submenuToggles.forEach((function(e){return e.close()}))}}])&&f(t.prototype,n),r&&f(t,r),e}();function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=function(){function e(t){var n=t.menuItemElement,r=t.menuLinkElement,i=t.parentMenu,u=t.isSubmenuItem,c=void 0!==u&&u,m=t.childMenu,h=void 0===m?null:m,f=t.toggle,p=void 0===f?null:f;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s({menuItemElement:n,menuLinkElement:r}),l({isSubmenuItem:c}),a(null!==h?{parentMenu:i,childMenu:h}:{parentMenu:i}),null!==p&&function(e){var t="element";try{if(e instanceof d)return!0;if("object"!==o(e)||e instanceof d)throw Error;for(var n in e)if(t=n,!(e[n]instanceof d))throw Error}catch(e){throw new TypeError("".concat(t," must be a MenuToggle."))}}({toggle:p}),this.domElements={item:n,link:r},this.menuElements={parentMenu:i,childMenu:h,toggle:p},this.isController=c,this.initialize()}var t,n,r;return t=e,(n=[{key:"initialize",value:function(){this.isMenubar=this.elements.parentMenu instanceof O,this.isMenubar&&(this.dom.item.setAttribute("role","none"),this.dom.link.setAttribute("role","menuitem"),this.dom.link.tabIndex=-1)}},{key:"dom",get:function(){return this.domElements}},{key:"elements",get:function(){return this.menuElements}},{key:"isSubmenuItem",get:function(){return this.isController}},{key:"focus",value:function(){"mouse"!==this.elements.parentMenu.currentEvent&&this.dom.link.focus(),this.isMenubar&&this.elements.parentMenu.isTopLevel&&(this.dom.link.tabIndex=0)}},{key:"blur",value:function(){"mouse"!==this.elements.parentMenu.currentEvent&&this.dom.link.blur(),this.isMenubar&&this.elements.parentMenu.isTopLevel&&(this.dom.link.tabIndex=-1)}}])&&p(t.prototype,n),r&&p(t,r),e}();function y(e){!function(e){var t="event";try{if(e instanceof KeyboardEvent)return!0;if("object"!==o(e))throw Error;for(var n in e)if(t=n,!(e[n]instanceof KeyboardEvent))throw Error}catch(e){throw new TypeError("".concat(t," must be a KeyboardEvent."))}}(e);try{var t=e.key||e.keyCode,n={Enter:"Enter"===t||13===t,Space:" "===t||"Spacebar"===t||32===t,Escape:"Escape"===t||"Esc"===t||27===t,ArrowUp:"ArrowUp"===t||"Up"===t||38===t,ArrowRight:"ArrowRight"===t||"Right"===t||39===t,ArrowDown:"ArrowDown"===t||"Down"===t||40===t,ArrowLeft:"ArrowLeft"===t||"Left"===t||37===t,Home:"Home"===t||36===t,End:"End"===t||35===t,Character:!!t.match(/^[a-zA-Z]{1}$/),Tab:"Tab"===t||9===t};return Object.keys(n).find((function(e){return!0===n[e]}))}catch(e){return""}}function b(e){!function(e){var t="event";try{if(e instanceof Event)return!0;if("object"!==o(e))throw Error;for(var n in e)if(t=n,!(e[n]instanceof Event))throw Error}catch(e){throw new TypeError("".concat(t," must be an Event."))}}(e),e.preventDefault(),e.stopPropagation()}function g(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(t){var n=t.menuElement,r=t.menuItemSelector,o=void 0===r?"li":r,u=t.menuLinkSelector,c=void 0===u?"a":u,m=t.submenuItemSelector,h=void 0===m?"":m,f=t.submenuToggleSelector,d=void 0===f?"a":f,p=t.submenuSelector,v=void 0===p?"ul":p,y=t.controllerElement,b=void 0===y?null:y,g=t.containerElement,E=void 0===g?null:g,C=t.openClass,w=void 0===C?"show":C,M=t.closeClass,S=void 0===M?"hide":M,k=t.isTopLevel,I=void 0===k||k,A=t.parentMenu,T=void 0===A?null:A,L=t.isHoverable,O=void 0!==L&&L,j=t.hoverDelay,D=void 0===j?250:j;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l({isTopLevel:I}),i(""!==h?{menuItemSelector:o,menuLinkSelector:c,submenuItemSelector:h,submenuToggleSelector:d,submenuSelector:v}:{menuItemSelector:o,menuLinkSelector:c}),s(null!==b||null!==E?{menuElement:n,controllerElement:b,containerElement:E}:{menuElement:n}),null!==T&&a({parentMenu:T}),this.domElements={menu:n,menuItems:[],submenuItems:[],submenuToggles:[],submenus:[],controller:b,container:E},this.domSelectors={menuItems:o,menuLinks:c,submenuItems:h,submenuToggles:d,submenus:v},this.menuElements={menuItems:[],submenuToggles:[],controller:null,parentMenu:T,rootMenu:I?this:null},this.openClass=w||"",this.closeClass=S||"",this.root=I,this.currentChild=0,this.focusState="none",this.currentEvent="none",this.isHoverable=O,this.hoverDelay=D,this.initialize()}var t,n,r;return t=e,(n=[{key:"initialize",value:function(){if(null===this.elements.rootMenu&&this.findRootMenu(this),this.setDOMElements(),this.isTopLevel&&this.dom.controller&&this.dom.container){var e=new d({menuToggleElement:this.dom.controller,parentElement:this.dom.container,controlledMenu:this,openClass:this.openClass,closeClass:this.closeClass});this.menuElements.controller=e}}},{key:"dom",get:function(){return this.domElements}},{key:"selectors",get:function(){return this.domSelectors}},{key:"elements",get:function(){return this.menuElements}},{key:"openClass",get:function(){return this.submenuOpenClass},set:function(e){h({openClass:e}),this.submenuOpenClass=e}},{key:"closeClass",get:function(){return this.submenuCloseClass},set:function(e){h({closeClass:e}),this.submenuCloseClass=e}},{key:"isTopLevel",get:function(){return this.root}},{key:"currentChild",get:function(){return this.focussedChild},set:function(e){u({value:e}),this.focussedChild=e}},{key:"focusState",get:function(){return this.state},set:function(e){!function(e){c(e);var t=["none","self","child"],n="value";try{if("object"!==o(e)){if(t.includes(e))return!0;throw Error}for(var r in e)if(n=r,!t.includes(e[r]))throw Error}catch(e){throw new Error("".concat(n," must be one of the following values: ").concat(t.join(", ")))}}({value:e}),this.state=e}},{key:"currentEvent",get:function(){return this.event},set:function(e){!function(e){c(e);var t=["none","mouse","keyboard"],n="value";try{if("object"!==o(e)){if(t.includes(e))return!0;throw Error}for(var r in e)if(n=r,!t.includes(e[r]))throw Error}catch(e){throw new Error("".concat(n," must be one of the following values: ").concat(t.join(", ")))}}({value:e}),this.event=e}},{key:"currentMenuItem",get:function(){return this.elements.menuItems[this.currentChild]}},{key:"isHoverable",get:function(){return this.hoverable},set:function(e){l({value:e}),this.hoverable=e}},{key:"hoverDelay",get:function(){return this.delay},set:function(e){u({value:e}),this.delay=e}},{key:"setDOMElementType",value:function(e,t,n){if("string"!=typeof this.selectors[e])throw new Error("".concat(e," is not a valid element type within the menu."));t&&s({base:t});var r=t||this.dom.menu,o=this.selectors[e],i=Array.from(r.querySelectorAll(o));this.domElements[e]=void 0!==n?"function"==typeof n?i.filter((function(e){return n(e)})):i:i.filter((function(e){return function(e){return e.parentElement===r}(e)}))}},{key:"addDOMElementType",value:function(e,t,n){if("string"!=typeof this.selectors[e])throw new Error("".concat(e," is not a valid element type within the menu."));t&&s({base:t});var r=t||this.dom.menu,o=this.selectors[e],i=Array.from(r.querySelectorAll(o));this.domElements[e]=[].concat(g(this.domElements[e]),g(void 0!==n?"function"==typeof n?i.filter((function(e){return n(e)})):i:i.filter((function(e){return function(e){return e.parentElement===r}(e)}))))}},{key:"clearDOMElementType",value:function(e){if("menu"!==e)if(Array.isArray(this.domElements[e]))this.domElements[e]=[];else{if(void 0===this.domElements[e])throw new Error("".concat(e," is not a valid element type within the menu."));this.domElements[e]=null}}},{key:"setDOMElements",value:function(){var e=this;this.setDOMElementType("menuItems"),""!==this.selectors.submenuItems&&(this.setDOMElementType("submenuItems"),this.clearDOMElementType("submenuToggles"),this.clearDOMElementType("submenus"),this.dom.submenuItems.forEach((function(t){e.addDOMElementType("submenuToggles",t),e.addDOMElementType("submenus",t)})))}},{key:"findRootMenu",value:function(e){if(e.isTopLevel)this.menuElements.rootMenu=e;else{if(null===e.elements.parentMenu)throw new Error("Cannot find root menu.");this.findRootMenu(e.elements.parentMenu)}}},{key:"createChildElements",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;this.dom.menuItems.forEach((function(e){var r;if(t.dom.submenuItems.includes(e)){var o=e.querySelector(t.selectors.submenuToggles),s=e.querySelector(t.selectors.submenus),i=new n({menuElement:s,menuItemSelector:t.selectors.menuItems,menuLinkSelector:t.selectors.menuLinks,submenuItemSelector:t.selectors.submenuItems,submenuToggleSelector:t.selectors.submenuToggles,submenuSelector:t.selectors.submenus,openClass:t.openClass,closeClass:t.closeClass,isTopLevel:!1,parentMenu:t,isHoverable:t.isHoverable,hoverDelay:t.hoverDelay}),l=new d({menuToggleElement:o,parentElement:e,controlledMenu:i,openClass:t.openClass,closeClass:t.closeClass,parentMenu:t});t.menuElements.submenuToggles.push(l),r=new v({menuItemElement:e,menuLinkElement:o,parentMenu:t,isSubmenuItem:!0,childMenu:i,toggle:l})}else{var u=e.querySelector(t.selectors.menuLinks);r=new v({menuItemElement:e,menuLinkElement:u,parentMenu:t})}t.menuElements.menuItems.push(r)}))}},{key:"handleFocus",value:function(){var e=this;this.elements.menuItems.forEach((function(t,n){t.dom.link.addEventListener("focus",(function(){e.elements.parentMenu&&(e.elements.parentMenu.focusState="child"),t.elements.childMenu&&(t.elements.childMenu.focusState="none"),e.focusState="self",e.currentChild=n}))}))}},{key:"handleClick",value:function(){var e=this,t=m("touchstart",this.dom.menu)?"touchstart":"mousedown",n=m("touchend",this.dom.menu)?"touchend":"mouseup";function r(e,t,n){b(n),t.toggle(),t.isOpen&&(e.focusState="self",t.elements.controlledMenu.focusState="none")}document.addEventListener(n,(function(t){"none"!==e.focusState&&(e.currentEvent="mouse",e.dom.menu.contains(t.target)||!e.dom.menu===t.target||(e.closeChildren(),e.blur(),e.elements.controller&&e.elements.controller.close()))})),this.elements.menuItems.forEach((function(o,s){o.dom.link.addEventListener(t,(function(){e.currentEvent="mouse",e.elements.rootMenu.blurChildren(),e.currentChild=s,e.focusCurrentChild()})),o.isSubmenuItem&&(o.elements.toggle.dom.toggle["on".concat(n)]=function(t){e.currentEvent="mouse",r(e,o.elements.toggle,t)})})),this.isTopLevel&&this.elements.controller&&(this.elements.controller.dom.toggle["on".concat(n)]=function(t){e.currentEvent="mouse",r(e,e.elements.controller,t)})}},{key:"handleHover",value:function(){var e=this;this.elements.submenuToggles.forEach((function(t){t.dom.parent.addEventListener("mouseenter",(function(){e.isHoverable&&(e.currentEvent="mouse",t.open())})),t.dom.parent.addEventListener("mouseleave",(function(){e.isHoverable&&setTimeout((function(){e.currentEvent="mouse",t.close()}),e.hoverDelay)}))}))}},{key:"handleKeydown",value:function(){var e=this;this.isTopLevel&&this.elements.controller&&this.elements.controller.dom.toggle.addEventListener("keydown",(function(t){e.currentEvent="keyboard";var n=y(t);"Space"!==n&&"Enter"!==n||b(t)}))}},{key:"handleKeyup",value:function(){var e=this;this.isTopLevel&&this.elements.controller&&this.elements.controller.dom.toggle.addEventListener("keyup",(function(t){e.currentEvent="keyboard";var n=y(t);"Space"!==n&&"Enter"!==n||(b(t),e.elements.controller.open(),e.focusFirstChild())}))}},{key:"focus",value:function(){this.focusState="self","mouse"!==this.currentEvent&&this.dom.menu.focus()}},{key:"blur",value:function(){this.focusState="none","mouse"!==this.currentEvent&&this.dom.menu.blur(),this.isTopLevel&&this.elements.controller&&this.elements.controller.close()}},{key:"focusFirstChild",value:function(){this.blurCurrentChild(),this.currentChild=0,this.focusCurrentChild()}},{key:"focusLastChild",value:function(){this.blurCurrentChild(),this.currentChild=this.elements.menuItems.length-1,this.focusCurrentChild()}},{key:"focusNextChild",value:function(){this.currentChild===this.elements.menuItems.length-1?this.focusFirstChild():(this.blurCurrentChild(),this.currentChild=this.currentChild+1,this.focusCurrentChild())}},{key:"focusPreviousChild",value:function(){0===this.currentChild?this.focusLastChild():(this.blurCurrentChild(),this.currentChild=this.currentChild-1,this.focusCurrentChild())}},{key:"focusCurrentChild",value:function(){-1!==this.currentChild&&this.currentMenuItem.focus()}},{key:"blurCurrentChild",value:function(){-1!==this.currentChild&&this.currentMenuItem.blur()}},{key:"focusNextChildWithCharacter",value:function(e){for(var t=e.toLowerCase(),n=this.currentChild+1,r=!1;!r&&n<this.elements.menuItems.length;)this.elements.menuItems[n].dom.item.innerText.toLowerCase().startsWith(t)&&(r=!0,this.currentChild=n,this.focusCurrentChild()),n++}},{key:"focusController",value:function(){this.dom.controller&&("mouse"!==this.currentEvent&&this.dom.controller.focus(),this.focusState="none")}},{key:"focusContainer",value:function(){this.dom.container&&("mouse"!==this.currentEvent&&this.dom.container.focus(),this.focusState="none")}},{key:"closeChildren",value:function(){this.elements.submenuToggles.forEach((function(e){return e.close()}))}},{key:"blurChildren",value:function(){this.elements.menuItems.forEach((function(e){e.blur(),e.isSubmenuItem&&e.elements.childMenu.blurChildren()}))}}])&&C(t.prototype,n),r&&C(t,r),e}();function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=L(e);if(t){var o=L(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return T(this,n)}}function T(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(s,e);var t,n,r,o=A(s);function s(e){var t=e.menuElement,n=e.menuItemSelector,r=void 0===n?"li":n,i=e.menuLinkSelector,l=void 0===i?"a":i,u=e.submenuItemSelector,c=void 0===u?"":u,a=e.submenuToggleSelector,m=void 0===a?"a":a,h=e.submenuSelector,f=void 0===h?"ul":h,d=e.controllerElement,p=void 0===d?null:d,v=e.containerElement,y=void 0===v?null:v,b=e.openClass,g=void 0===b?"show":b,E=e.closeClass,C=void 0===E?"hide":E,w=e.isTopLevel,M=void 0===w||w,S=e.parentMenu,k=void 0===S?null:S,I=e.isHoverable,A=void 0!==I&&I,T=e.hoverDelay,L=void 0===T?250:T;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o.call(this,{menuElement:t,menuItemSelector:r,menuLinkSelector:l,submenuItemSelector:c,submenuToggleSelector:m,submenuSelector:f,controllerElement:p,containerElement:y,openClass:g,closeClass:C,isTopLevel:M,parentMenu:k,isHoverable:A,hoverDelay:L})}return t=s,(n=[{key:"initialize",value:function(){k(L(s.prototype),"initialize",this).call(this),this.dom.menu.setAttribute("role","menubar"),this.createChildElements(s),this.handleFocus(),this.handleClick(),this.isHoverable&&this.handleHover(),this.handleKeydown(),this.handleKeyup(),this.elements.menuItems[0].dom.link.tabIndex=0}},{key:"handleKeydown",value:function(){var e=this;k(L(s.prototype),"handleKeydown",this).call(this),this.dom.menu.addEventListener("keydown",(function(t){e.currentEvent="keyboard";var n=y(t);"Tab"===n&&("none"!==e.elements.rootMenu.focusState?(e.elements.rootMenu.blur(),e.elements.rootMenu.closeChildren()):e.elements.rootMenu.focus()),"Character"===n?b(t):e.isTopLevel?"self"===e.focusState&&(["ArrowRight","ArrowLeft","Home","End"].includes(n)||e.currentMenuItem.isSubmenuItem&&["Space","Enter","ArrowDown","ArrowUp"].includes(n)||e.elements.controller&&["Escape"].includes(n))&&b(t):(["Escape","ArrowRight","ArrowLeft","ArrowDown","ArrowUp","Home","End"].includes(n)||e.currentMenuItem.isSubmenuItem&&["Space","Enter"].includes(n))&&b(t)}))}},{key:"handleKeyup",value:function(){var e=this;k(L(s.prototype),"handleKeyup",this).call(this),this.dom.menu.addEventListener("keyup",(function(t){e.currentEvent="keyboard";var n=y(t),r=t.altKey,o=t.crtlKey,s=t.metaKey;if("Character"!==n||r||o||s)if(e.isTopLevel){if("self"===e.focusState)if("Space"===n||"Enter"===n)e.currentMenuItem.isSubmenuItem&&(b(t),e.currentMenuItem.elements.toggle.open(),requestAnimationFrame((function(){e.currentMenuItem.elements.childMenu.focusFirstChild()})));else if("ArrowRight"===n){b(t);var i=e.currentMenuItem.isSubmenuItem&&e.currentMenuItem.elements.toggle.isOpen;e.focusNextChild(),i&&(e.currentMenuItem.isSubmenuItem?e.currentMenuItem.elements.toggle.preview():e.closeChildren())}else if("ArrowLeft"===n){b(t);var l=e.currentMenuItem.isSubmenuItem&&e.currentMenuItem.elements.toggle.isOpen;e.focusPreviousChild(),l&&(e.currentMenuItem.isSubmenuItem?e.currentMenuItem.elements.toggle.preview():e.closeChildren())}else"ArrowDown"===n?e.currentMenuItem.isSubmenuItem&&(b(t),e.currentMenuItem.elements.toggle.open(),requestAnimationFrame((function(){e.currentMenuItem.elements.childMenu.focusFirstChild()}))):"ArrowUp"===n?e.currentMenuItem.isSubmenuItem&&(b(t),e.currentMenuItem.elements.toggle.open(),requestAnimationFrame((function(){e.currentMenuItem.elements.childMenu.focusLastChild()}))):"Home"===n?(b(t),e.focusFirstChild()):"End"===n?(b(t),e.focusLastChild()):"Escape"===n&&(e.elements.submenuToggles.some((function(e){return e.isOpen}))?(b(t),e.closeChildren()):e.isTopLevel&&e.elements.controller&&e.elements.controller.isOpen&&(b(t),e.elements.controller.close(),e.focusController()))}else"Space"===n||"Enter"===n?e.currentMenuItem.isSubmenuItem&&(b(t),e.currentMenuItem.elements.toggle.open(),requestAnimationFrame((function(){e.currentMenuItem.elements.childMenu.focusFirstChild()}))):"Escape"===n?(b(t),e.elements.rootMenu.closeChildren(),e.elements.rootMenu.focusCurrentChild()):"ArrowRight"===n?e.currentMenuItem.isSubmenuItem?(b(t),e.currentMenuItem.elements.toggle.open(),requestAnimationFrame((function(){e.currentMenuItem.elements.childMenu.focusFirstChild()}))):(b(t),e.elements.rootMenu.closeChildren(),e.elements.rootMenu.focusNextChild(),e.elements.rootMenu.currentMenuItem.isSubmenuItem&&e.elements.rootMenu.currentMenuItem.elements.toggle.preview()):"ArrowLeft"===n?e.elements.parentMenu.currentMenuItem.isSubmenuItem&&(b(t),e.elements.parentMenu.currentMenuItem.elements.toggle.close(),e.elements.parentMenu.focusCurrentChild(),e.elements.parentMenu===e.elements.rootMenu&&(e.elements.rootMenu.closeChildren(),e.elements.rootMenu.focusPreviousChild(),e.elements.rootMenu.currentMenuItem.isSubmenuItem&&e.elements.rootMenu.currentMenuItem.elements.toggle.preview())):"ArrowDown"===n?(b(t),e.focusNextChild()):"ArrowUp"===n?(b(t),e.focusPreviousChild()):"Home"===n?(b(t),e.focusFirstChild()):"End"===n&&(b(t),e.focusLastChild());else b(t),e.focusNextChildWithCharacter(t.key)}))}}])&&S(t.prototype,n),r&&S(t,r),s}(w);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t,n){return(R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=F(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=F(e);if(t){var o=F(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return P(this,n)}}function P(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}return{Menubar:O,DisclosureMenu:function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(s,e);var t,n,r,o=H(s);function s(e){var t,n=e.menuElement,r=e.menuItemSelector,i=void 0===r?"li":r,l=e.menuLinkSelector,u=void 0===l?"a":l,c=e.submenuItemSelector,a=void 0===c?"":c,m=e.submenuToggleSelector,h=void 0===m?"a":m,f=e.submenuSelector,d=void 0===f?"ul":f,p=e.controllerElement,v=void 0===p?null:p,y=e.containerElement,b=void 0===y?null:y,g=e.openClass,E=void 0===g?"show":g,C=e.closeClass,w=void 0===C?"hide":C,M=e.isTopLevel,S=void 0===M||M,k=e.parentMenu,I=void 0===k?null:k,A=e.isHoverable,T=void 0!==A&&A,L=e.hoverDelay,O=void 0===L?250:L;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,{menuElement:n,menuItemSelector:i,menuLinkSelector:u,submenuItemSelector:a,submenuToggleSelector:h,submenuSelector:d,controllerElement:v,containerElement:b,openClass:E,closeClass:w,isTopLevel:S,parentMenu:I,isHoverable:T,hoverDelay:O})).currentChild=-1,t}return t=s,(n=[{key:"initialize",value:function(){R(F(s.prototype),"initialize",this).call(this),this.createChildElements(s),this.handleFocus(),this.handleClick(),this.isHoverable&&this.handleHover(),this.handleKeydown(),this.handleKeyup()}},{key:"handleKeydown",value:function(){var e=this;R(F(s.prototype),"handleKeydown",this).call(this),this.dom.menu.addEventListener("keydown",(function(t){e.currentEvent="keyboard";var n=y(t);"self"===e.focusState&&(["ArrowUp","ArrowRight","ArrowDown","ArrowLeft","Home","End"].includes(n)||e.currentMenuItem.isSubmenuItem&&["Space","Enter"].includes(n)||e.elements.controller&&["Escape"].includes(n)||e.elements.parentMenu&&["Escape"].includes(n))&&b(t)}))}},{key:"handleKeyup",value:function(){var e=this;R(F(s.prototype),"handleKeyup",this).call(this),this.dom.menu.addEventListener("keyup",(function(t){e.currentEvent="keyboard";var n=y(t);"self"===e.focusState&&("Space"===n||"Enter"===n?e.currentMenuItem.isSubmenuItem&&(b(t),e.currentMenuItem.elements.toggle.preview()):"Escape"===n?e.elements.submenuToggles.some((function(e){return e.isOpen}))?(b(t),e.closeChildren()):e.elements.parentMenu?(b(t),e.elements.parentMenu.closeChildren(),e.elements.parentMenu.focusCurrentChild()):e.isTopLevel&&e.elements.controller&&e.elements.controller.isOpen&&(e.elements.controller.close(),e.focusController()):"ArrowDown"===n||"ArrowRight"===n?(b(t),e.currentMenuItem.isSubmenuItem&&e.currentMenuItem.elements.toggle.isOpen?e.currentMenuItem.elements.childMenu.focusFirstChild():e.focusNextChild()):"ArrowUp"===n||"ArrowLeft"===n?(b(t),e.focusPreviousChild()):"Home"===n?(b(t),e.focusFirstChild()):"End"===n&&(b(t),e.focusLastChild()))}))}},{key:"focusNextChild",value:function(){this.currentChild<this.elements.menuItems.length-1&&(this.blurCurrentChild(),this.currentChild=this.currentChild+1,this.focusCurrentChild())}},{key:"focusPreviousChild",value:function(){this.currentChild>0&&(this.blurCurrentChild(),this.currentChild=this.currentChild-1,this.focusCurrentChild())}}])&&D(t.prototype,n),r&&D(t,r),s}(w)}}();
//# sourceMappingURL=accessibleMenu.min.js.map
